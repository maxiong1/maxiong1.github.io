<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 优化 | 熊大</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/v1/icons/favicon.ico">
    <meta name="description" content="webpack-bundle-analyzer、减少项目打包后体积">
    
    <link rel="preload" href="/v1/assets/css/0.styles.f88691c4.css" as="style"><link rel="preload" href="/v1/assets/js/app.93a1c734.js" as="script"><link rel="preload" href="/v1/assets/js/2.2eaeb6cd.js" as="script"><link rel="preload" href="/v1/assets/js/3.f94d89fc.js" as="script"><link rel="preload" href="/v1/assets/js/16.92cfe601.js" as="script"><link rel="preload" href="/v1/assets/js/10.5d42a13c.js" as="script"><link rel="prefetch" href="/v1/assets/js/11.faa2cbe0.js"><link rel="prefetch" href="/v1/assets/js/12.c2385ffd.js"><link rel="prefetch" href="/v1/assets/js/13.9796a203.js"><link rel="prefetch" href="/v1/assets/js/14.69cee3bc.js"><link rel="prefetch" href="/v1/assets/js/15.84574b18.js"><link rel="prefetch" href="/v1/assets/js/17.9017431a.js"><link rel="prefetch" href="/v1/assets/js/18.322b0918.js"><link rel="prefetch" href="/v1/assets/js/19.c310df05.js"><link rel="prefetch" href="/v1/assets/js/20.2849d8cd.js"><link rel="prefetch" href="/v1/assets/js/21.5f446f72.js"><link rel="prefetch" href="/v1/assets/js/22.4da8e7cf.js"><link rel="prefetch" href="/v1/assets/js/23.09fd5336.js"><link rel="prefetch" href="/v1/assets/js/24.6f140176.js"><link rel="prefetch" href="/v1/assets/js/25.c5e4886a.js"><link rel="prefetch" href="/v1/assets/js/26.9ffc96d5.js"><link rel="prefetch" href="/v1/assets/js/27.f9af4141.js"><link rel="prefetch" href="/v1/assets/js/28.f3da97f3.js"><link rel="prefetch" href="/v1/assets/js/29.45d64603.js"><link rel="prefetch" href="/v1/assets/js/30.6c475319.js"><link rel="prefetch" href="/v1/assets/js/31.237a3dd1.js"><link rel="prefetch" href="/v1/assets/js/32.23ad9890.js"><link rel="prefetch" href="/v1/assets/js/33.8e4b9ad1.js"><link rel="prefetch" href="/v1/assets/js/34.fd826f97.js"><link rel="prefetch" href="/v1/assets/js/35.40c1d2a4.js"><link rel="prefetch" href="/v1/assets/js/36.cc9a53ac.js"><link rel="prefetch" href="/v1/assets/js/37.9f36fb35.js"><link rel="prefetch" href="/v1/assets/js/38.68f0c241.js"><link rel="prefetch" href="/v1/assets/js/39.20baf80f.js"><link rel="prefetch" href="/v1/assets/js/4.d944a8e7.js"><link rel="prefetch" href="/v1/assets/js/40.72b1c71c.js"><link rel="prefetch" href="/v1/assets/js/41.59836dd0.js"><link rel="prefetch" href="/v1/assets/js/42.da98654d.js"><link rel="prefetch" href="/v1/assets/js/43.712879c1.js"><link rel="prefetch" href="/v1/assets/js/44.f963778b.js"><link rel="prefetch" href="/v1/assets/js/45.1458ba25.js"><link rel="prefetch" href="/v1/assets/js/46.a4d81a6a.js"><link rel="prefetch" href="/v1/assets/js/47.45292823.js"><link rel="prefetch" href="/v1/assets/js/48.7078d7ff.js"><link rel="prefetch" href="/v1/assets/js/49.1a43378d.js"><link rel="prefetch" href="/v1/assets/js/5.b4f51445.js"><link rel="prefetch" href="/v1/assets/js/50.f42270fe.js"><link rel="prefetch" href="/v1/assets/js/51.94122348.js"><link rel="prefetch" href="/v1/assets/js/52.0b22b89f.js"><link rel="prefetch" href="/v1/assets/js/53.be6cf0d3.js"><link rel="prefetch" href="/v1/assets/js/54.1e9bd091.js"><link rel="prefetch" href="/v1/assets/js/55.8509a0aa.js"><link rel="prefetch" href="/v1/assets/js/56.06a2a4b0.js"><link rel="prefetch" href="/v1/assets/js/57.d6befc86.js"><link rel="prefetch" href="/v1/assets/js/58.58a52084.js"><link rel="prefetch" href="/v1/assets/js/59.d4a7ef3d.js"><link rel="prefetch" href="/v1/assets/js/6.ff65f142.js"><link rel="prefetch" href="/v1/assets/js/60.397bb874.js"><link rel="prefetch" href="/v1/assets/js/61.04c7a2b1.js"><link rel="prefetch" href="/v1/assets/js/62.5f2fa66c.js"><link rel="prefetch" href="/v1/assets/js/63.08563569.js"><link rel="prefetch" href="/v1/assets/js/64.683202f8.js"><link rel="prefetch" href="/v1/assets/js/65.994e4933.js"><link rel="prefetch" href="/v1/assets/js/66.d181bb53.js"><link rel="prefetch" href="/v1/assets/js/67.70db4014.js"><link rel="prefetch" href="/v1/assets/js/68.3377e375.js"><link rel="prefetch" href="/v1/assets/js/69.bbc32937.js"><link rel="prefetch" href="/v1/assets/js/7.251e48f5.js"><link rel="prefetch" href="/v1/assets/js/70.cd94421a.js"><link rel="prefetch" href="/v1/assets/js/71.d9ed3ce4.js"><link rel="prefetch" href="/v1/assets/js/72.3c47c8b2.js"><link rel="prefetch" href="/v1/assets/js/73.9ff4db73.js"><link rel="prefetch" href="/v1/assets/js/74.cbe0c7dc.js"><link rel="prefetch" href="/v1/assets/js/75.bf13e6cc.js"><link rel="prefetch" href="/v1/assets/js/76.4f16823f.js"><link rel="prefetch" href="/v1/assets/js/77.bed0965d.js"><link rel="prefetch" href="/v1/assets/js/78.6951de73.js"><link rel="prefetch" href="/v1/assets/js/8.0e98a616.js"><link rel="prefetch" href="/v1/assets/js/9.94e20e0d.js">
    <link rel="stylesheet" href="/v1/assets/css/0.styles.f88691c4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container dm-xiong-detail"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/v1/" class="home-link router-link-active"><!----> <span class="site-name">熊大</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v1/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/v1/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/v1/webpack/" class="nav-link router-link-active">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/v1/blog/" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow down"></span></button> <button type="button" aria-label="github" class="mobile-dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/maxiong88/emailgfriend" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa-email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v1/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/v1/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/v1/webpack/" class="nav-link router-link-active">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/v1/blog/" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow down"></span></button> <button type="button" aria-label="github" class="mobile-dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/maxiong88/emailgfriend" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa-email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack 优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v1/webpack/wp-beginner.html#webpack" class="sidebar-link">webpack</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/v1/webpack/wp-beginner.html#代码优化" class="sidebar-link">代码优化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/v1/webpack/wp-beginner.html#浏览器兼容" class="sidebar-link">浏览器兼容</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content__default theme-default-content custom"><p>webpack-bundle-analyzer 文件可视化分析工具</p> <p>bang dou  an ne lai ze</p> <div><button type="button" class="el-button el-button--text"><!----><!----><span>前后文件对比</span></button> <div class="el-dialog__wrapper wpduibiDialog" style="display:none;"><div role="dialog" aria-modal="true" aria-label="前后文件对比" class="el-dialog" style="margin-top:15vh;"><div class="el-dialog__header"><span class="el-dialog__title">前后文件对比</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div></div> <h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h2> <h4 id="moment"><a href="#moment" class="header-anchor">#</a> moment</h4> <p>moment引入默认包含全球语言包，使用以下方法可以优化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// 移除语言包，只保留中文</span>
	  config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment[/\\]locale$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">zh-cn</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//   config.module.noParse =  /^(vue|vue-router|vuex|vuex-router-sync|jquery)$/</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> opts

</code></pre></div><h4 id="module-noparse"><a href="#module-noparse" class="header-anchor">#</a> module.noParse</h4> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
       <span class="token literal-property property">noParse</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">jquery</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的代码，会让webpack不会去解析此文件，如果文件包含<code>import</code> <code>require</code>是不会编译解析的。</p> <p>如果不设置noParse，则webpack会解析文件与依赖文件</p> <p>下面看一下两张图片</p> <p>设置noParse</p> <p><img src="/v1/assets/img/156.452b14dd.png" alt="设置noParse"></p> <p>没有设置noParse</p> <p><img src="/v1/assets/img/157.83d1f1a8.png" alt="没有设置noParse"></p> <p>vue-cli 的 noParse 都会被解析，不知道啥原因</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// mqtt里面的es6语法不会被编译成es5语法</span>
<span class="token keyword">import</span> mqtt <span class="token keyword">from</span> <span class="token string">'mqtt'</span>

<span class="token comment">// mqttjs里面的es6语法会被编译成es5语法</span>
<span class="token keyword">import</span> mqtt <span class="token keyword">from</span> <span class="token string">'./js/mqtt.js'</span>
</code></pre></div><h4 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree Shaking</h4> <p><code>tree shaking</code> 是一个术语，通常用于描述移除 JavaScript 上下文中的未引用代码(dead-code)。它依赖于 ES2015 模块语法的 静态结构 特性，例如 import 和 export。这个术语和概念实际上是由 ES2015 模块打包工具 rollup 普及起来的。</p> <h6 id="先说好处"><a href="#先说好处" class="header-anchor">#</a> 先说好处</h6> <p>删除未使用到的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入并赋值给 JavaScript 对象，然后在下面的代码中被用到</span>
<span class="token comment">// 这会被看作“活”代码，不会做 tree-shaking</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> cloneDeep <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;lodash-es&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cloneDeep<span class="token punctuation">)</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> mqtt <span class="token keyword">from</span> <span class="token string">&quot;mqtt&quot;</span> 
<span class="token comment">// 导入mqtt模块内的所有内容，并将其命名为“mqtt”</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2222'</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;mqtt&quot;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'222'</span><span class="token punctuation">)</span>


<span class="token comment">// 导入并赋值给 JavaScript 对象，但在接下来的代码里没有用到</span>
<span class="token comment">// 这就会被当做“死”代码，会被 tree-shaking</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> cloneDeep <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;lodash-es&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2222'</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> echarts <span class="token keyword">from</span> <span class="token string">'echarts/core'</span><span class="token punctuation">;</span>
<span class="token comment">// 引入 echarts 核心模块，核心模块提供了 echarts 使用必须要的接口</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'222'</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> BarChart <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'echarts/charts'</span><span class="token punctuation">;</span>
<span class="token comment">// 引入柱状图图表，图表后缀都为 Chart</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'22222'</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="用支持-tree-shaking-的方式写-import"><a href="#用支持-tree-shaking-的方式写-import" class="header-anchor">#</a> 用支持 tree-shaking 的方式写 import</h6> <p>在编写支持 tree-shaking 的代码时，导入方式非常重要。你应该避免将整个库导入到单个 JavaScript 对象中。当你这样做时，你是在告诉 Webpack 你需要整个库， Webpack 就不会 shaking。</p> <p>以流行的库 Lodash 为例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 全部导入 (不支持 tree-shaking)</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token comment">// 具名导入(支持 tree-shaking)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounce <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token comment">// 直接导入具体的模块 (支持 tree-shaking)</span>
<span class="token keyword">import</span> debounce <span class="token keyword">from</span> <span class="token string">'lodash/lib/debounce'</span><span class="token punctuation">;</span>
</code></pre></div><p>所有可需要 tree-shaking 的代码必须以这种方式编译。因此，如果你有要导入的库，则必须将这些库编译为 es2015 模块以便进行 tree-shaking 。如果它们被编译为 commonjs，那么它们就不能做 tree-shaking ，并且将会被打包进你的应用程序中。许多库支持部分导入，lodash 就是一个很好的例子，它本身是 commonjs 模块，但是它有一个 lodash-es 版本，用的是 es2015模块。 export和import</p> <h6 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h6> <p>Webpack 中，Tree-shaking 的实现一是先标记出模块导出值中哪些没有被用过，二是使用 Terser 删掉这些没被用到的导出语句</p> <h4 id="cache-loader-thread-loader"><a href="#cache-loader-thread-loader" class="header-anchor">#</a> cache-loader thread-loader</h4> <ul><li><p>thread-loader</p> <ul><li>为每个loader开启一个线程</li></ul></li> <li><p>cache-loader</p> <ul><li>结果缓存到磁盘里</li></ul></li></ul> <p>多次打包会看到效果，但是实际项目也不会让你多次部署，除非每次都有bug出现</p> <h2 id="代码优化"><a href="#代码优化" class="header-anchor">#</a> 代码优化</h2> <p>在没事的时候学会 review 自己的代码</p> <h4 id="图表展示"><a href="#图表展示" class="header-anchor">#</a> 图表展示</h4> <ul><li><p>蚂蚁金服 antvis</p> <ul><li>@antv/data-set 为数据可视化场景提供状态驱动（state driven）的、丰富而强大的数据处理能力。</li> <li>viser-vue（基于AntV-G2可视化引擎，但是viser-vue不是蚂蚁金服的）使用Viser进行可视化，让你的数据变得更加直观</li></ul></li> <li><p>百度 Echart</p> <ul><li>升级到 v5 支持按需加载，减少文件体积</li></ul></li> <li><p>vue-apexcharts</p> <ul><li>Apexcharts是一个现代的JavaScript图表库/可通过简单的API构建交互式图表和可视化 （单租户系统存在）</li></ul></li></ul> <h4 id="富文本编辑器"><a href="#富文本编辑器" class="header-anchor">#</a> 富文本编辑器</h4> <ul><li><p>tinymce</p> <ul><li>@tinymce/tinymce-vue</li> <li>tinymce</li> <li>TinyMCE是一款易用、且功能强大的所见即所得的富文本编辑器</li></ul></li> <li><p>@toast-ui/editor</p> <ul><li>markdown语法的文章编辑页面</li></ul></li></ul> <h4 id="按需加载"><a href="#按需加载" class="header-anchor">#</a> 按需加载</h4> <p>lodash</p> <ul><li>lodash/debounce</li> <li>lodash.debounce</li> <li>lodash-es 是 lodash 的 es modules 版本，体积更小</li> <li>lodash 是默认的 commonjs 版本</li></ul> <p>大部门还是在全局引入lodash，最好使用lodash-es、可以通过webpack <code>tree-shaking</code> 可以删除没有用到的方法</p> <h4 id="时间处理器"><a href="#时间处理器" class="header-anchor">#</a> 时间处理器</h4> <ul><li>dayjs
<ul><li>体积非常小 600多kb</li></ul></li> <li>moment
<ul><li>4.多M （未压缩前）</li></ul></li></ul> <h4 id="关于存在多个jquery问题"><a href="#关于存在多个jquery问题" class="header-anchor">#</a> 关于存在多个jquery问题</h4> <p>因为你不知道其他第三方库会不会引入jquery，而你又需要jquery，那就可能会存在多个版本的情况，所以我们更需要数据分析工具，来帮助我们项目是不是重复引入多个版本的js文件</p> <h4 id="静态数据"><a href="#静态数据" class="header-anchor">#</a> 静态数据</h4> <ul><li>pcaajs
<ul><li>省市县数据 100kb</li></ul></li></ul> <h4 id="module-noparse-2"><a href="#module-noparse-2" class="header-anchor">#</a> module.noParse</h4> <p>防止 webpack 解析那些任何与给定正则表达式相匹配的文件。忽略的文件中 不应该含有 import, require, define 的调用，或任何其他导入机制。忽略大型的 library 可以提高构建性能。</p> <h4 id="图片压缩工具"><a href="#图片压缩工具" class="header-anchor">#</a> 图片压缩工具</h4> <p>推荐 https://tinypng.com/</p> <h4 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h4> <ul><li>多个版本jquery 没有找到解决方法，不知道都哪些地方再用</li> <li>lodash 还是会吧 lodash、lodsh-es打包，不知道哪个插件再用</li></ul> <p>这种库有很多不一一举例，希望同学们在引入第三方库的时候多一点时间考虑怎么最优使用它</p> <h2 id="浏览器兼容"><a href="#浏览器兼容" class="header-anchor">#</a> 浏览器兼容</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 新语法不会处理-打包到vender中 只进行了格式化处理</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span><span class="token punctuation">;</span>
<span class="token comment">// Building for production...[BABEL] Note: The code generator has deoptimised the styling of /Library/WebServer/Documents/ty/webpack11/ant-design-vue-screen/src/js/mqtt.js as it exceeds the max of 500KB.</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> mqtt <span class="token keyword">from</span> <span class="token string">&quot;mqtt&quot;</span>

<span class="token comment">// 新语法会处理成es5</span>
<span class="token keyword">import</span> <span class="token string">'./js/jquery.js'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> mqtt <span class="token keyword">from</span> <span class="token string">&quot;./js/mqtt.js&quot;</span>
</code></pre></div></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v1/webpack/" class="prev router-link-active">
        /webpack/
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/v1/assets/js/app.93a1c734.js" defer></script><script src="/v1/assets/js/2.2eaeb6cd.js" defer></script><script src="/v1/assets/js/3.f94d89fc.js" defer></script><script src="/v1/assets/js/16.92cfe601.js" defer></script><script src="/v1/assets/js/10.5d42a13c.js" defer></script>
  </body>
</html>
