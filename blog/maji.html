<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小笔记 | 熊大</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/icons/favicon.ico">
    <meta name="description" content="熊大">
    
    <link rel="preload" href="/assets/css/0.styles.bd006e01.css" as="style"><link rel="preload" href="/assets/js/app.38fa98b7.js" as="script"><link rel="preload" href="/assets/js/2.2eaeb6cd.js" as="script"><link rel="preload" href="/assets/js/3.f94d89fc.js" as="script"><link rel="preload" href="/assets/js/14.63493608.js" as="script"><link rel="prefetch" href="/assets/js/10.5d42a13c.js"><link rel="prefetch" href="/assets/js/11.72832b22.js"><link rel="prefetch" href="/assets/js/12.c2385ffd.js"><link rel="prefetch" href="/assets/js/13.9796a203.js"><link rel="prefetch" href="/assets/js/15.84574b18.js"><link rel="prefetch" href="/assets/js/16.6717819a.js"><link rel="prefetch" href="/assets/js/17.04195353.js"><link rel="prefetch" href="/assets/js/18.db252575.js"><link rel="prefetch" href="/assets/js/19.b8c1f39e.js"><link rel="prefetch" href="/assets/js/20.99c14349.js"><link rel="prefetch" href="/assets/js/21.5f446f72.js"><link rel="prefetch" href="/assets/js/22.4da8e7cf.js"><link rel="prefetch" href="/assets/js/23.09fd5336.js"><link rel="prefetch" href="/assets/js/24.152d1726.js"><link rel="prefetch" href="/assets/js/25.997666be.js"><link rel="prefetch" href="/assets/js/26.4fb481e6.js"><link rel="prefetch" href="/assets/js/27.fcc4d00a.js"><link rel="prefetch" href="/assets/js/28.bf0ddfbb.js"><link rel="prefetch" href="/assets/js/29.e48a7d00.js"><link rel="prefetch" href="/assets/js/30.c87faef9.js"><link rel="prefetch" href="/assets/js/31.4d16ef7e.js"><link rel="prefetch" href="/assets/js/32.cf66b752.js"><link rel="prefetch" href="/assets/js/33.55f7625c.js"><link rel="prefetch" href="/assets/js/34.8daae06f.js"><link rel="prefetch" href="/assets/js/35.0a751506.js"><link rel="prefetch" href="/assets/js/36.1db53a9c.js"><link rel="prefetch" href="/assets/js/37.3540bf8e.js"><link rel="prefetch" href="/assets/js/38.d8363d14.js"><link rel="prefetch" href="/assets/js/39.7a6cdd7c.js"><link rel="prefetch" href="/assets/js/4.d944a8e7.js"><link rel="prefetch" href="/assets/js/40.210f7b36.js"><link rel="prefetch" href="/assets/js/41.1a2237b0.js"><link rel="prefetch" href="/assets/js/42.9f4de14d.js"><link rel="prefetch" href="/assets/js/43.2f8905ac.js"><link rel="prefetch" href="/assets/js/44.fec2f7f4.js"><link rel="prefetch" href="/assets/js/45.35c5a4b8.js"><link rel="prefetch" href="/assets/js/46.b288c192.js"><link rel="prefetch" href="/assets/js/47.d2abc0be.js"><link rel="prefetch" href="/assets/js/48.b55f00d8.js"><link rel="prefetch" href="/assets/js/49.cc7a37f9.js"><link rel="prefetch" href="/assets/js/5.b4f51445.js"><link rel="prefetch" href="/assets/js/50.184ecb16.js"><link rel="prefetch" href="/assets/js/51.006258c5.js"><link rel="prefetch" href="/assets/js/52.2047492a.js"><link rel="prefetch" href="/assets/js/53.08de7c00.js"><link rel="prefetch" href="/assets/js/54.e0b786bd.js"><link rel="prefetch" href="/assets/js/55.2b648739.js"><link rel="prefetch" href="/assets/js/56.5a53034e.js"><link rel="prefetch" href="/assets/js/57.71c182e9.js"><link rel="prefetch" href="/assets/js/58.c0b57bf7.js"><link rel="prefetch" href="/assets/js/59.05986b6d.js"><link rel="prefetch" href="/assets/js/6.ecf14d15.js"><link rel="prefetch" href="/assets/js/60.eddce9a0.js"><link rel="prefetch" href="/assets/js/61.9527c97c.js"><link rel="prefetch" href="/assets/js/62.5d668f20.js"><link rel="prefetch" href="/assets/js/63.ffa04808.js"><link rel="prefetch" href="/assets/js/64.11cc9c08.js"><link rel="prefetch" href="/assets/js/65.a109292b.js"><link rel="prefetch" href="/assets/js/66.c08e7502.js"><link rel="prefetch" href="/assets/js/67.24a7215a.js"><link rel="prefetch" href="/assets/js/68.40e3be5c.js"><link rel="prefetch" href="/assets/js/69.7fdc4580.js"><link rel="prefetch" href="/assets/js/7.ee6204d3.js"><link rel="prefetch" href="/assets/js/70.47de116a.js"><link rel="prefetch" href="/assets/js/71.13e0f43e.js"><link rel="prefetch" href="/assets/js/72.2732d016.js"><link rel="prefetch" href="/assets/js/73.5698915f.js"><link rel="prefetch" href="/assets/js/74.0e745a61.js"><link rel="prefetch" href="/assets/js/8.278752f3.js"><link rel="prefetch" href="/assets/js/9.94e20e0d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bd006e01.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container dm-xiong-detail"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">熊大</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link router-link-active">
  随笔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow down"></span></button> <button type="button" aria-label="github" class="mobile-dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/maxiong88/emailgfriend" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa-email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/" class="nav-link router-link-active">
  随笔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="github" class="dropdown-title"><span class="title">github</span> <span class="arrow down"></span></button> <button type="button" aria-label="github" class="mobile-dropdown-title"><span class="title">github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/maxiong88/emailgfriend" target="_blank" rel="noopener noreferrer" class="nav-link external">
  koa-email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>小笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/maji.html#instanceof-类型检测" class="sidebar-link">instanceof 类型检测</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#mdn解释" class="sidebar-link">MDN解释</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#实现原理" class="sidebar-link">实现原理</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#描述" class="sidebar-link">描述</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#实例" class="sidebar-link">实例</a></li></ul></li><li><a href="/blog/maji.html#for-in、for-of、foreach、map、for" class="sidebar-link">for..in、for..of、forEach、map、for</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#navigator-sendbeacon" class="sidebar-link">navigator.sendBeacon</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#ts-有什么优势" class="sidebar-link">Ts 有什么优势</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#new操作符" class="sidebar-link">new操作符</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#js数据类型" class="sidebar-link">js数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#js转换规则不同场景应用" class="sidebar-link">js转换规则不同场景应用</a></li></ul></li><li><a href="/blog/maji.html#与-你真的明白吗" class="sidebar-link">== 与 === 你真的明白吗</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#抽象运算" class="sidebar-link">抽象运算：</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#抽象相等比较" class="sidebar-link">抽象相等比较</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#严格相等比较" class="sidebar-link">严格相等比较</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#案例" class="sidebar-link">案例</a></li></ul></li><li><a href="/blog/maji.html#精度问题" class="sidebar-link">精度问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#在-vue-中-子组件为何不可以修改父组件传递的-prop-如果修改了-vue-是如何监控到属性的修改并给出警告的。" class="sidebar-link">在 Vue 中，子组件为何不可以修改父组件传递的 Prop，如果修改了，Vue 是如何监控到属性的修改并给出警告的。</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue双向数据绑定" class="sidebar-link">vue双向数据绑定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#a-dependency-class-依赖类" class="sidebar-link">A Dependency Class 依赖类</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#a-watcher-function-观察者功能" class="sidebar-link">A Watcher Function 观察者功能</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#object-defineproperty" class="sidebar-link">Object.defineProperty()</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#putting-both-ideas-together-结合" class="sidebar-link">Putting both ideas together 结合</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/maji.html#vue-attr-listeners-用法" class="sidebar-link">vue $attr $listeners 用法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-use" class="sidebar-link">vue.use()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#初始化" class="sidebar-link">初始化</a></li></ul></li><li><a href="/blog/maji.html#vue和react组件通信" class="sidebar-link">Vue和React组件通信</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#_1-2-3-map-parseint" class="sidebar-link">[1,2,3].map(parseInt)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#throttle-debounced" class="sidebar-link">throttle debounced</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#throttle-节流" class="sidebar-link">throttle 节流</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#debounce-去抖" class="sidebar-link">debounce 去抖</a></li></ul></li><li><a href="/blog/maji.html#js-克隆" class="sidebar-link">js 克隆</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#深克隆" class="sidebar-link">深克隆</a></li></ul></li><li><a href="/blog/maji.html#手写bind" class="sidebar-link">手写bind</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#点击li-输出其索引-0-1-2" class="sidebar-link">点击li，输出其索引 0 1 2</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#jsonp原理" class="sidebar-link">JSONP原理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#session、cookie、token" class="sidebar-link">session、cookie、token</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#margin-无效情形解析" class="sidebar-link">margin 无效情形解析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#iife-立即调用函数表达式" class="sidebar-link">IIFE 立即调用函数表达式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#如何写一个函数f-new-f-f" class="sidebar-link">如何写一个函数F，new F === F？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#_0-1-0-2-0-3" class="sidebar-link">0.1+0.2 !== 0.3</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#flex概念" class="sidebar-link">flex概念</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#css-多行-单行省略" class="sidebar-link">css 多行/单行省略</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#函数柯里化-高阶函数" class="sidebar-link">函数柯里化 --- 高阶函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#柯里化的好处" class="sidebar-link">柯里化的好处</a></li></ul></li><li><a href="/blog/maji.html#cdn-优化有哪些" class="sidebar-link">CDN 优化有哪些</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#webpack-loader原理" class="sidebar-link">webpack  loader原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#编写" class="sidebar-link">编写</a></li></ul></li><li><a href="/blog/maji.html#条件比较多的时候-if-else-和-switch-性能哪个高" class="sidebar-link">条件比较多的时候 if-else 和 switch 性能哪个高</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#_0-1-1-2-3-5-8-假设第-0-个是-0-第-1-个是-1-求第-n-个数的实现方式" class="sidebar-link">0 1 1 2 3 5 8，假设第 0 个是 0，第 1 个是 1，求第 n 个数的实现方式？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#nth-child-匹配父级子元素" class="sidebar-link">nth-child 匹配父级子元素</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#选择器优先级-在任何情况下都会遵循优先级吗" class="sidebar-link">选择器优先级？在任何情况下都会遵循优先级吗？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#伪元素和伪类有哪些-为什么要有伪类和伪元素-为什么伪元素用一个冒号也可以" class="sidebar-link">伪元素和伪类有哪些？为什么要有伪类和伪元素？为什么伪元素用一个冒号也可以？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#css的margin-top、padding-top、translate-x、background-size、line-height、分别相对于谁" class="sidebar-link">css的margin-top、padding-top、translate-x、background-size、line-height、分别相对于谁？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#对于传进来null-会不会触发默认赋值。" class="sidebar-link">对于传进来null，会不会触发默认赋值。</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#es6数组扁平化方法的polyfill" class="sidebar-link">ES6数组扁平化方法的polyfill</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#看了哪些前端的书籍了" class="sidebar-link">看了哪些前端的书籍了？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#bfc布局规则" class="sidebar-link">BFC布局规则</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#声明一个函数fn-对其使用typeof-结果返回什么-然后我给fn添加一个属性-请问会报错吗-为什么" class="sidebar-link">声明一个函数fn,对其使用typeof,结果返回什么？然后我给fn添加一个属性，请问会报错吗？为什么？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#es6中-promise能实现异步的原理是什么-我new一个promise-然后对这个promise实例使用typeof-结果是什么-promise实例接收的参数是一个函数-函数接收两个参数一个resolve-一个reject-为什么resolve后可以实现继续执行后续代码" class="sidebar-link">ES6中，promise能实现异步的原理是什么？我new一个promise,然后对这个promise实例使用typeof，结果是什么？promise实例接收的参数是一个函数，函数接收两个参数一个resolve,一个reject,为什么resolve后可以实现继续执行后续代码？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#css-单行文本居中显示-多行文本左对齐" class="sidebar-link">css 单行文本居中显示，多行文本左对齐</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#为什么你老是讲不清楚js的继承模式" class="sidebar-link">为什么你老是讲不清楚js的继承模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#面向对象" class="sidebar-link">面向对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#add-1-2-3" class="sidebar-link">add(1)(2)(3)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#缓存" class="sidebar-link">缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#存储" class="sidebar-link">存储</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#http缓存-浏览器缓存" class="sidebar-link">http缓存（浏览器缓存）</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#cdn" class="sidebar-link">CDN</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#_1-css实现动画-怎么让它执行完这个去执行另外一个keyframe-你怎么知道这个动画什么时候结束" class="sidebar-link">1. css实现动画，怎么让它执行完这个去执行另外一个keyFrame，你怎么知道这个动画什么时候结束</a></li></ul></li><li><a href="/blog/maji.html#实现隔一段时间输出name" class="sidebar-link">实现隔一段时间输出name</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#为啥下面这个代码会爆栈-用settimeout来递归实现setinterve-就不会爆栈" class="sidebar-link">为啥下面这个代码会爆栈？用setTimeout来递归实现setInterve()就不会爆栈</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#requestanimationframe-算他的执行间隔" class="sidebar-link">requestAnimationFrame，算他的执行间隔</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#input-type-file-这个东西好丑-怎么让它变漂亮" class="sidebar-link">&lt;input type=&quot;file&quot;&gt; 这个东西好丑，怎么让它变漂亮</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#读取全部数据-渲染页面" class="sidebar-link">读取全部数据，渲染页面</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#前端控制并发数" class="sidebar-link">前端控制并发数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#关于keep-alive对多级路由缓存无效的情况" class="sidebar-link">关于keep-alive对多级路由缓存无效的情况</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#动态路由同一个组件keepalive导致缓存异常" class="sidebar-link">动态路由同一个组件keepalive导致缓存异常</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#渲染页面-浏览器的工作原理" class="sidebar-link">渲染页面：浏览器的工作原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#token过期" class="sidebar-link">token过期</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#axios二次封装的好处" class="sidebar-link">axios二次封装的好处</a></li></ul></li><li><a href="/blog/maji.html#vue虚拟dom" class="sidebar-link">vue虚拟dom</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vuex-流程" class="sidebar-link">vuex 流程</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-router-路由模式" class="sidebar-link">vue-router 路由模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#如何监听-pushstate-和-replacestate-的变化呢" class="sidebar-link">如何监听 pushstate 和 replacestate 的变化呢？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#pinia" class="sidebar-link">pinia</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/maji.html#pinia在这个项目里解决了什么问题" class="sidebar-link">pinia在这个项目里解决了什么问题</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#pinia的store你是如何进行设计的" class="sidebar-link">pinia的store你是如何进行设计的</a></li><li class="sidebar-sub-header"><a href="/blog/maji.html#你的store有进行模块的拆分吗-还是说放在一起" class="sidebar-link">你的store有进行模块的拆分吗？还是说放在一起</a></li></ul></li><li><a href="/blog/maji.html#打包工具" class="sidebar-link">打包工具</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#url" class="sidebar-link">url</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#dns预解析" class="sidebar-link">DNS预解析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#dns优化" class="sidebar-link">dns优化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#闭包" class="sidebar-link">闭包</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-组件中写-name-选项有哪些好处" class="sidebar-link">vue 组件中写 name 选项有哪些好处</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-异步更新队列-nexttick" class="sidebar-link">vue 异步更新队列（nexttick）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-自定义钩子函数" class="sidebar-link">vue 自定义钩子函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#项目介绍-业务介绍" class="sidebar-link">项目介绍(业务介绍)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-key" class="sidebar-link">vue key</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue什么情况下失去响应" class="sidebar-link">vue什么情况下失去响应</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#computed-watch" class="sidebar-link">computed watch</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#float-position" class="sidebar-link">float position</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue-双向绑定" class="sidebar-link">vue 双向绑定</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#foreach-map" class="sidebar-link">foreach map</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#封装通用组件" class="sidebar-link">封装通用组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#translate" class="sidebar-link">translate</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#既然有了-cookie-为什么还要-localstorage" class="sidebar-link">既然有了 cookie 为什么还要 localStorage?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#_1" class="sidebar-link">1</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#filter-montheds" class="sidebar-link">filter + montheds</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#vue2-vue3" class="sidebar-link">vue2 vue3</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/maji.html#试" class="sidebar-link">试</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content__default theme-default-content custom"><h2 id="instanceof-类型检测"><a href="#instanceof-类型检测" class="header-anchor">#</a> instanceof 类型检测</h2> <p>说对象是某个构造函数的实例并非纸上谈兵，实际上，可以在代码中使用运算符 <code>instanceof</code> 来确定对象是由哪个构造函数创建的</p> <p>在JavaScript中，操作符<code>instanceof</code>使用在原型链中</p> <h3 id="mdn解释"><a href="#mdn解释" class="header-anchor">#</a> MDN解释</h3> <p><code>instanceof</code>运算符用于测试构造函数的[原型对象]<code>prototype</code>属性是否出现在对象的原型链中的任何位置</p> <h3 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h3> <p>说到原理这东西其实<code>MDN</code>上面已经给出了答案，就是要检测的对象的原型链中的任何位置，是否有 <code>构造函数的prototype</code></p> <p>对于5.1规范 6.0规范(不考虑)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">instance_of</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token constant">R</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//L 表示左表达式，R 表示右表达式</span>
	<span class="token keyword">var</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span><span class="token comment">// 取 R 的显示原型</span>
	<span class="token constant">L</span> <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span><span class="token comment">// 取 L 的隐式原型</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
	    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> 
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">O</span> <span class="token operator">===</span> <span class="token constant">L</span><span class="token punctuation">)</span><span class="token comment">// 这里重点：当 O 严格等于 L 时，返回 true </span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
		<span class="token constant">L</span> <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><h3 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h3> <p><code>[要检测的对象] instanceof [某个构造函数]</code></p> <p>在这里我们就说 要检测的对象 是构造函数创建的是一个实例</p> <p>实际上创建对象时，运算符new在幕后存储了一些信息，让你随时都能确定对象是有哪个构造函数创建的。运算符instanceof就是根据这些信息来确定对象是否是指定构造函数的实例</p> <h3 id="描述"><a href="#描述" class="header-anchor">#</a> 描述</h3> <p>检测构造函数的原型对象是否存在于实例的原型链中</p> <h3 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> simpleStr <span class="token operator">=</span> <span class="token string">&quot;This is a simple string&quot;</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> myString  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newStr    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;String created with constructor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myDate    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myObj     <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myNonObj  <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

simpleStr <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false, 检查原型链会找到 undefined</span>
myString  <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true</span>
newStr    <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true</span>
myString  <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true</span>

myObj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>    <span class="token comment">// 返回 true, 尽管原型没有定义</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>    <span class="token comment">// 返回 true, 同上</span>
myNonObj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false, 一种创建对象的方法，这种方法创建的对象不是Object的一个实例</span>

myString <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">;</span> <span class="token comment">//返回 false</span>

myDate <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">;</span>     <span class="token comment">// 返回 true</span>
myDate <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>   <span class="token comment">// 返回 true</span>
myDate <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span>   <span class="token comment">// 返回 false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Foo <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Foo <span class="token keyword">instanceof</span> <span class="token class-name">Foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre></div><p>清单 7. Object instanceof Object</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 为了方便表述，首先区分左侧表达式和右侧表达式</span>
ObjectL <span class="token operator">=</span> Object<span class="token punctuation">,</span> ObjectR <span class="token operator">=</span> Object<span class="token punctuation">;</span> 
<span class="token comment">// 下面根据规范逐步推演</span>
<span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">ObjectR</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype 
<span class="token constant">L</span> <span class="token operator">=</span> ObjectL<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype 
<span class="token comment">// 第一次判断</span>
<span class="token constant">O</span> <span class="token operator">!=</span> <span class="token constant">L</span> 
<span class="token comment">// 循环查找 L 是否还有 __proto__ </span>
<span class="token constant">L</span> <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype 
<span class="token comment">// 第二次判断</span>
<span class="token constant">O</span> <span class="token operator">==</span> <span class="token constant">L</span> 
<span class="token comment">// 返回 true</span>
</code></pre></div><p>清单 8. Function instanceof Function</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 为了方便表述，首先区分左侧表达式和右侧表达式</span>
FunctionL <span class="token operator">=</span> Function<span class="token punctuation">,</span> FunctionR <span class="token operator">=</span> Function<span class="token punctuation">;</span> 
<span class="token comment">// 下面根据规范逐步推演</span>
<span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">FunctionR</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype 
<span class="token constant">L</span> <span class="token operator">=</span> FunctionL<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype 
<span class="token comment">// 第一次判断</span>
<span class="token constant">O</span> <span class="token operator">==</span> <span class="token constant">L</span> 
<span class="token comment">// 返回 true</span>
</code></pre></div><p>清单 9. Foo instanceof Foo</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 为了方便表述，首先区分左侧表达式和右侧表达式</span>
FooL <span class="token operator">=</span> Foo<span class="token punctuation">,</span> FooR <span class="token operator">=</span> Foo<span class="token punctuation">;</span> 
<span class="token comment">// 下面根据规范逐步推演</span>
<span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">FooR</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype 
<span class="token constant">L</span> <span class="token operator">=</span> FooL<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype 
<span class="token comment">// 第一次判断</span>
<span class="token constant">O</span> <span class="token operator">!=</span> <span class="token constant">L</span> 
<span class="token comment">// 循环再次查找 L 是否还有 __proto__ </span>
<span class="token constant">L</span> <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype 
<span class="token comment">// 第二次判断</span>
<span class="token constant">O</span> <span class="token operator">!=</span> <span class="token constant">L</span> 
<span class="token comment">// 再次循环查找 L 是否还有 __proto__ </span>
<span class="token constant">L</span> <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token keyword">null</span> 
<span class="token comment">// 第三次判断</span>
<span class="token constant">L</span> <span class="token operator">==</span> <span class="token keyword">null</span> 
<span class="token comment">// 返回 false</span>
</code></pre></div><ul><li>基本类型因为没有原型链，所以使用instanceof 返回false</li> <li>通过<code>Object.create(null)</code>创建的对象 无任何属性原型链 所以也返回false</li> <li>基本类型可以使用typeof检测</li> <li>检测数据类型可使<code>Object.prototype.toString.call(类型)</code></li></ul> <h2 id="for-in、for-of、foreach、map、for"><a href="#for-in、for-of、foreach、map、for" class="header-anchor">#</a> for..in、for..of、forEach、map、for</h2> <ul><li><code>for...of</code> 以原始插入顺序迭代数组，<code>break;return</code>退出循环</li> <li><code>for...in</code> 以任意顺序迭代对象，<code>break;return</code>退出循环</li></ul> <h2 id="navigator-sendbeacon"><a href="#navigator-sendbeacon" class="header-anchor">#</a> navigator.sendBeacon</h2> <p><code>navigator.sendBeacon()</code> 方法可用于通过HTTP将少量数据异步传输到Web服务器</p> <p>这个方法主要用于满足统计和诊断代码的需要，这些代码通常尝试在卸载（unload）文档之前向web服务器发送数据</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/sendBeacon" target="_blank" rel="noopener noreferrer">navigator.sendBeacon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ts-有什么优势"><a href="#ts-有什么优势" class="header-anchor">#</a> Ts 有什么优势</h2> <p>类型系统</p> <h2 id="new操作符"><a href="#new操作符" class="header-anchor">#</a> new操作符</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token class-name">Test</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token string">'yck'</span><span class="token punctuation">)</span>

<span class="token comment">// 以下是conosle.log(t)输出</span>
Test <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;yck&quot;</span>
    <span class="token literal-property property">__proto__</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">sayName</span><span class="token operator">:</span> <span class="token function">ƒ</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token literal-property property">constructor</span><span class="token operator">:</span> ƒ <span class="token function">Test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
            <span class="token literal-property property">arguments</span><span class="token operator">:</span> <span class="token keyword">null</span>
            <span class="token literal-property property">caller</span><span class="token operator">:</span> <span class="token keyword">null</span>
            <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Test&quot;</span>
            <span class="token literal-property property">prototype</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">sayName</span><span class="token operator">:</span> ƒ<span class="token punctuation">,</span> <span class="token literal-property property">constructor</span><span class="token operator">:</span> ƒ<span class="token punctuation">}</span>
            <span class="token literal-property property">__proto__</span><span class="token operator">:</span> <span class="token function">ƒ</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">[</span><span class="token punctuation">[</span>FunctionLocation<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">VM4610</span><span class="token operator">:</span><span class="token number">1</span>
            <span class="token punctuation">[</span><span class="token punctuation">[</span>Scopes<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">:</span> Scopes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token literal-property property">__proto__</span><span class="token operator">:</span> Object
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们来跟踪一下其执行过程。</p> <ul><li>new 首先创建一个新的空对象</li> <li>接下来，new设置this，使其指向这个新对象
<ul><li>这个this存储了一个引用，指向代码当前处理的对象</li></ul></li> <li>设置this后，调用函数Test，并将yck当作实参传递给它</li> <li>接下来，执行这个函数代码，与大多数构造函数一样，Test给新创建的this对象的属性赋值</li> <li>最后，Test函数执行完毕后，运算符new返回this--指向新创建的对象的引用。请注意，它会自动为你返回this，你无需在代码中显式地返回。指向新对象的引用被返回后，我们将其赋给变量t</li></ul> <p>从上面我们可以知道</p> <ul><li>new 操作符会返回一个新对象，所以我们需要在内部创建一个对象</li> <li>这个对象可以访问构造函数上的任意属性,可以访问到构造函数原型上的属性/方法，所以需要将对象与构造函数链接起来</li> <li>返回原始值需要忽略，返回对象需要正常处理</li></ul> <p>回顾了这些作用，我们就可以着手来实现功能了</p> <p><code>Object.create(prototype/null)</code>返回值是一个新对象，带着指定的原型对象和属性。Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。</p> <p><code>Object.setPrototypeOf({},prototype/null)</code>设置一个指定的对象的原型 ( 即, 内部[[Prototype]]属性）到另一个对象或null。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">Con<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//   let obj = {};</span>
<span class="token comment">//   Object.setPrototypeOf(obj, Con.prototype)</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Con</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token keyword">return</span> result <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj
<span class="token punctuation">}</span>
</code></pre></div><p>关于构造函数返回值的问题：</p> <ul><li>构造函数会默认返回this，也就是新的实例对象</li> <li>普通函数如果没有return值的话，返回undefined</li> <li>return的是五种简单数据类型：String,Number,Boolean,Null,Undefined的话，构造函数会忽略return的值，依然返回this对象</li> <li>如果return的是引用类型：Array,Date,Object,Function,RegExp,Error的话，构造函数和普通函数都会返回return后面的值,构造函数的原型不被使用</li></ul> <h2 id="js数据类型"><a href="#js数据类型" class="header-anchor">#</a> js数据类型</h2> <p>栈(stack)会自动分配内存空间，会自动释放。<br>
堆(heap)动态分配的内存，大小不定也不会自动释放</p> <p>基本数据类型：值存放在栈内存中，占据固定大小的空间，访问方式是按值访问。<code>Undefined,String,Boolean,Null,Number,Symbol</code></p> <p>引用类型：值保存在堆内存中,包含引用类型的变量实际上保存的不是变量本身，而是指向该对象的指针，访问方式是按引用访问。<code>Object，Array，Function</code></p> <p>js弱类型语言，变量的类型由其值所决定, 赋值过程中发生了强制类型转换</p> <h4 id="类型转换的原理"><a href="#类型转换的原理" class="header-anchor">#</a> 类型转换的原理</h4> <ul><li>ToPrimitive</li> <li>ToString</li> <li>ToNumber</li> <li>ToBoolean</li> <li>toObject</li></ul> <h3 id="js转换规则不同场景应用"><a href="#js转换规则不同场景应用" class="header-anchor">#</a> js转换规则不同场景应用</h3> <ul><li><p>什么时候自动转换为string类型</p> <ul><li>(在没有对象情况下)字符串的自动转换，主要发生在字符串的<code>加法运算</code>时。当一个值为字符串，另一个值为非字符串，则后者转为字符串。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'2'</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// '21'</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token boolean">true</span> <span class="token comment">// &quot;2true&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token boolean">false</span> <span class="token comment">// &quot;2false&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token keyword">undefined</span> <span class="token comment">// &quot;2undefined&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token keyword">null</span> <span class="token comment">// &quot;2null&quot;</span>
</code></pre></div><ul><li>当有对象且与对象+时候</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//toString的对象</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">toString</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">'a'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token operator">+</span>obj2<span class="token punctuation">)</span>
<span class="token comment">//输出结果2a</span>

<span class="token comment">//常规对象</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
<span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token operator">+</span>obj1<span class="token punctuation">)</span>；
<span class="token comment">//输出结果 2[object Object]</span>

<span class="token comment">//几种特殊对象</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// &quot;2[object Object]&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// &quot;2&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// &quot;2function (){}&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'koala'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 2koala,1</span>
</code></pre></div></li> <li><p>什么时候自动转换为Number类型</p> <ul><li>加减乘除运算符</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token boolean">true</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token comment">// 1</span>
<span class="token boolean">true</span> <span class="token operator">+</span> <span class="token boolean">true</span> <span class="token comment">// 2</span>
<span class="token boolean">true</span> <span class="token operator">+</span> <span class="token boolean">false</span> <span class="token comment">//1</span>
<span class="token string">'5'</span> <span class="token operator">-</span> <span class="token string">'2'</span> <span class="token comment">// 3</span>
<span class="token string">'5'</span> <span class="token operator">*</span> <span class="token string">'2'</span> <span class="token comment">// 10</span>
<span class="token boolean">true</span> <span class="token operator">-</span> <span class="token number">1</span>  <span class="token comment">// 0</span>
<span class="token boolean">false</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// -1</span>
<span class="token string">'1'</span> <span class="token operator">-</span> <span class="token number">1</span>   <span class="token comment">// 0</span>
<span class="token string">'5'</span> <span class="token operator">*</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">// 0</span>
<span class="token boolean">false</span> <span class="token operator">/</span> <span class="token string">'5'</span> <span class="token comment">// 0</span>
<span class="token string">'abc'</span> <span class="token operator">-</span> <span class="token number">1</span>   <span class="token comment">// NaN</span>
<span class="token keyword">null</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 1</span>
<span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// NaN</span>

<span class="token comment">//一元运算符（注意点）</span>
<span class="token operator">+</span><span class="token string">'abc'</span> <span class="token comment">// NaN</span>
<span class="token operator">-</span><span class="token string">'abc'</span> <span class="token comment">// NaN</span>
<span class="token operator">+</span><span class="token boolean">true</span> <span class="token comment">// 1</span>
<span class="token operator">-</span><span class="token boolean">false</span> <span class="token comment">// 0	</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">注意：</p> <p>null转为数值时为0，而undefined转为数值时为NaN。</p></div></li> <li><p>什么时候进行布尔转换</p> <ul><li>if、while判断</li> <li>三元运算符、逻辑运算符</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">undefined</span>
	<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">null</span>
	<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">0</span>
	<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">NaN</span>
	<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">''</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// true</span>

<span class="token comment">//下面两种情况也会转成布尔类型</span>
expression <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token operator">!</span><span class="token operator">!</span> expression
</code></pre></div></li></ul> <h2 id="与-你真的明白吗"><a href="#与-你真的明白吗" class="header-anchor">#</a> == 与 === 你真的明白吗</h2> <h3 id="抽象运算"><a href="#抽象运算" class="header-anchor">#</a> 抽象运算：</h3> <p>这些操作不是ECMAScript语言的一部分；它们在这里的定义只是为了帮助规范ECMAScript语言的语义。</p> <p>ECMAScript语言根据需要隐式执行自动类型转换。</p> <ul><li><p>ToPrimitive(input, [PreferredType]) 将输入的参数转化为非对象类型</p> <ul><li>input 输入参数</li> <li>preferredType 可选参数，需要转化成什么类型</li> <li>如果是基本类型<code>Undefined Null Boolean Number String Symbol</code> 返回他们本身</li> <li>如果是<code>Object</code> <ul><li>preferredType = string
<ul><li>先调用toString(), 如果返回原始值则return；否则调用valueOf()</li></ul></li> <li>preferredType = number
<ul><li>先调用valueOf(), 如果返回原始值则return；否则调用toString()</li></ul></li> <li>preferredType = ''
<ul><li>如果对象是Date，则 preferredType被设置为string</li> <li>否则preferredType 被设置为number</li></ul></li></ul></li> <li>Object.prototype.toString() 对象的字符串</li> <li>Object.prototype.valueOf() 对象的原始值</li></ul></li> <li><p>ToBoolean(argument) 将参数转为boolean类型</p> <ul><li>如果是<code>Undefined Null</code> 则返回“false”</li> <li>如果是<code>Object Symbol</code> 则返回“true”</li> <li>如果是<code>Number</code> <ul><li>如果是<code>+0 -0 NaN</code> 则返回 “false”</li> <li>否则返回“true”</li></ul></li> <li>如果是<code>String</code> <ul><li>如果是空字符串 则返回“false”</li> <li>否则返回“true”</li></ul></li></ul></li> <li><p>ToNumber(argument) 将参数转为number类型</p> <ul><li>如果是<code>Undefined</code> 则返回 “NaN”</li> <li>如果是 <code>Null</code> 则返回 “+0”</li> <li>如果是 <code>Boolean</code> <ul><li>如果入参论据“true” 返回 “+1”</li> <li>如果入参论据“false” 返回 “+0”</li></ul></li> <li>如果是 <code>String</code> 则 涉及到编码自己看吧
<ul><li>如果无法将字符串解释为<code>StringNumericLiteral</code>的扩展，则ToNumber(string) 返回NaN</li> <li>如果是空、空格(whatespace)返回‘0’</li> <li><a href="//www.ecma-international.org/ecma-262/6.0/index.html#sec-tonumber">规则</a></li></ul></li> <li>如果是<code>Symbol</code> 则 抛出“typeError”</li> <li>如果是<code>Object</code> 则 “ToNumber(ToPrimitive(argument, hint Number))”</li></ul></li> <li><p>ToString(argument) 将参数转换为string类型</p> <ul><li>如果是 <code>undefined</code> 返回 ‘undefined’</li> <li>如果是 <code>Null</code> 返回 ‘null’</li> <li>如果是 <code>Boolean</code> <ul><li>如果是 ·true· 返回 ‘true’</li> <li>如果是  <code>false</code> 返回 ‘false’</li></ul></li> <li>如果是<code>Number</code> 则
<ul><li>如果argument是NaN,则返回字符串NaN</li> <li>如果argument是+0、-0，则返回字符串0</li> <li>如果argument小于0，则返回字符串argument</li> <li>如果argument是正无穷大， 则返回字符串 &quot;Infinity&quot;</li> <li>剩下的就是进制的区别，自己去看吧</li></ul></li> <li>如果是 <code>string</code> 返回 本身</li> <li>如果是<code>Symbol</code> 返回 ‘TypeError’</li> <li>如果是<code>Object</code> 返回 ‘ToString(ToPrimivite(argument, hint String))’</li></ul></li> <li><p>toObject(argument) 将参数转换为object类型</p> <ul><li>如果是 <code>undefined</code> 返回 抛出‘TypeError’</li> <li>如果是 <code>Null</code> 返回 抛出‘TypeError’</li> <li>如果是 <code>Boolean</code> 返回一个boolean对象</li> <li>如果是<code>Number</code> 返回一个Number对象</li> <li>如果是 <code>string</code> 返回一个string对象</li> <li>如果是<code>Symbol</code> 返回一个ymbol对象</li> <li>如果是<code>Object</code> 返回 本身</li></ul></li></ul> <p>接下来正题：</p> <h3 id="抽象相等比较"><a href="#抽象相等比较" class="header-anchor">#</a> 抽象相等比较</h3> <ul><li>如果类型x与类型y相同，如果值相同则true，值不同返回false</li> <li>如果x为空，y未定义，则返回true</li> <li>如果x未定义，y为空，则返回true</li> <li>如果x的类型是number，y的类型是字符串，则比较结果x == ToNumber(y)</li> <li>如果x的类型是string，y的类型是number，则比较结果ToNumber(x) == y</li> <li>如果x的类型是boolean，则比较结果ToNumber(x) == y</li> <li>如果y的类型是boolean，则比较结果 x == ToNumber(y)</li> <li>如果x的类型是string、number、symbol，y的类型是object，则比较结果是 x == ToPrimitive(y, [string\number\symbol])</li> <li>如果x的类型是object，y的类型是string、number、symbol ，则比较ToPrimitive(x) == y</li></ul> <h3 id="严格相等比较"><a href="#严格相等比较" class="header-anchor">#</a> 严格相等比较</h3> <ul><li>如果x的类型与y的类型不同，返回false</li> <li>如果x,y的类型是Undefined,返回true</li> <li>如果x,y的类型是Null,返回true</li> <li>如果x,y的类型是number
<ul><li>如果是 x是NaN，返回false</li> <li>如果是 y是NaN，返回false</li> <li>如果x，y返回的值相同，返回true</li> <li>如果x是+0，y是-0，返回true</li> <li>如果x是-0，y是+0，返回true</li></ul></li> <li>如果x，y是string
<ul><li>如果是相同的编码，相同的长度，返回true</li> <li>否则返回false</li></ul></li> <li>如果x，y是boolean
<ul><li>如果x，y都是true或者false，返回true</li> <li>否则返回false</li></ul></li> <li>如果x，y是相同的symbol值，返回true</li> <li>如果x,y是相同的object值，返回true</li></ul> <h3 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h3> <p><code>'' == NaN</code>
根据规范 左边是string，右边是number，则 ToNumber('') == 0 ,false</p> <p><code>'' == 0</code>
根据规范 左边是string，右边是number，则 ToNumber('') == 0 ,true</p> <p><a href="//www.ecma-international.org/ecma-262/6.0/index.html#sec-type-conversion">ecma-262/6.0</a></p> <p><code>valueOf()</code> 他是返回一个指定类型[Number、Object、Boolean、Date]的原始值</p> <table><thead><tr><th>类型</th> <th style="text-align:left;">返回值</th></tr></thead> <tbody><tr><td>Array</td> <td style="text-align:left;">返回数组本身</td></tr> <tr><td>Boolean</td> <td style="text-align:left;">布尔值</td></tr> <tr><td>Date</td> <td style="text-align:left;">当前毫秒数</td></tr> <tr><td>Function</td> <td style="text-align:left;">函数本身</td></tr> <tr><td>Number</td> <td style="text-align:left;">数字值</td></tr> <tr><td>Object</td> <td style="text-align:left;">对象本身</td></tr> <tr><td>String</td> <td style="text-align:left;">字符串值</td></tr> <tr><td></td> <td style="text-align:left;">Math、Error对象没有valueOf方法</td></tr></tbody></table> <ul><li><a href="https://stackoverflow.com/questions/359494/which-equals-operator-vs-should-be-used-in-javascript-comparisons/359509#359509" target="_blank" rel="noopener noreferrer">stackoverflow.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="精度问题"><a href="#精度问题" class="header-anchor">#</a> 精度问题</h2> <p>出现精度问题是因为：用二进制无法精确地表示出来</p> <ul><li>乘以倍数的问题： 44.8976*10000，结果就不是整数-&gt; 448975.99999999994（不可用）
<ul><li>需要乘以当前数字的长度,即：1000000，在运算</li></ul></li> <li>暴力方式：<code>String().substring(0,2)</code></li> <li>toFixed(2): 1.105、1.115是特例</li> <li>第三方库 <code>decimal.js</code>、<code>math.js</code>、<code>big.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 适合处理长度不超过15个数字的场景。（15个数字即整数的位数加上小数的位数不超过15位，</span>
<span class="token comment">// 如：1234567890.12345 或者 12345.0123456789，之类）</span>
<span class="token comment">/**
 *修复精度
 *
 * @param {number} num 需修复的浮点数
 * @param {number|undefined} intLength 计算前入参的整数长度部分，用于动态调整精度
 * @returns
 */</span>
<span class="token keyword">function</span> <span class="token function">fixPrecision</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> intLength</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 根据整数长度部分，动态调整精度</span>
  <span class="token keyword">return</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">+</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">15</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>intLength <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">getIntLength</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 获取整数部分数字长度
 *
 * @param {number} num
 * @returns {number}
 */</span>
<span class="token keyword">function</span> <span class="token function">getIntLength</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> pointIndex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> num <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> pointIndex <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> pointIndex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getMaxIL</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">getIntLength</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getIntLength</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fixPrecision</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">,</span> <span class="token function">getMaxIL</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1000.9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.3</span>

<span class="token comment">// 作者：liquid15280</span>
<span class="token comment">// 链接：https://juejin.cn/post/6844903974336724999</span>
<span class="token comment">// 来源：稀土掘金</span>
<span class="token comment">// 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span>
</code></pre></div><h2 id="在-vue-中-子组件为何不可以修改父组件传递的-prop-如果修改了-vue-是如何监控到属性的修改并给出警告的。"><a href="#在-vue-中-子组件为何不可以修改父组件传递的-prop-如果修改了-vue-是如何监控到属性的修改并给出警告的。" class="header-anchor">#</a> 在 Vue 中，子组件为何不可以修改父组件传递的 Prop，如果修改了，Vue 是如何监控到属性的修改并给出警告的。</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>首先父级的组件发生更新，子组件的<code>prop</code>也会更新为最新值，数据流就单向的；
如果是基本类型值改变，则会控制台发生警告
如果是对象和数组值改变，会更新，不发生警告[如果是更新当前对象的值会 发生警告]</p> <p>可使用两种方案解决：</p> <p>1、在子组件中定义一个本地的 <code>data</code> 属性并将这个 <code>prop</code> 用作其初始值</p> <p>2、在子组件中使用这个 <code>prop</code> 的值来定义一个计算属性<code>computed</code></p></div> <p>第二个问题：如果修改了，Vue 是如何监控到属性的修改并给出警告的</p> <ul><li><p>模板解析</p> <ul><li>initProps
<ul><li>vm.$options.propsData 获取父组件传递给子组件的 <code>prop</code> 数据</li> <li>通过for in  遍历可枚举属性，所以不会深度遍历，调用 loop(key)
<ul><li>!isRoot !isUpdatingChildComponent 都是true</li> <li>通过 <code>defineReactive$$1</code> <ul><li>这里注入了 customSetter  defineReactive$$1错误提示信息 ·Avoid mutating a prop directly·</li> <li>为每个属性添加依赖 dep</li></ul></li> <li><code>updateListeners</code> 注册绑定监听事件
<ul><li><code>createFnInvoker</code></li> <li><code>add</code></li></ul></li></ul></li></ul></li> <li>...其他生命周期解析</li></ul></li> <li><p>触发更新的时候</p> <ul><li>执行 <code>invoker</code></li> <li>判断绑定事件是否是数组</li> <li>不是数组将会return 出错误</li> <li><code>invokeWithErrorHandling</code></li> <li>通过 apply 执行事件</li> <li>Object.defineProperty 修改定义属性的值</li> <li>customSetter  !isRoot !isUpdatingChildComponent 都是true</li> <li>执行 defineReactive$$1 注册是回调函数 warn [引用类型中 newVal===value return 出去了 ]</li> <li>子组件状态改变 控制台出现警告[引用类型不出警告，父子组件状态都改变]</li></ul></li></ul> <p>用下面的例子来说明：</p> <div class="language-js extra-class"><pre class="language-js"><code>	Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Zoo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'ddd'</span><span class="token punctuation">,</span> <span class="token string">'aaa'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;h3 @click=&quot;zzzw&quot;&gt;{{ ddd }}&lt;/h3&gt;'</span><span class="token punctuation">,</span>
		<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>aaa<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token function">zzzw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>ddd <span class="token operator">=</span> <span class="token string">'mmmmmmmmmm'</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">el</span><span class="token operator">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token literal-property property">ddd</span><span class="token operator">:</span><span class="token string">'ssss'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">aaa</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token literal-property property">www</span><span class="token operator">:</span><span class="token string">'2222'</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="vue双向数据绑定"><a href="#vue双向数据绑定" class="header-anchor">#</a> vue双向数据绑定</h2> <h3 id="a-dependency-class-依赖类"><a href="#a-dependency-class-依赖类" class="header-anchor">#</a> A Dependency Class 依赖类</h3> <h4 id="解决的问题"><a href="#解决的问题" class="header-anchor">#</a> 解决的问题</h4> <p>扩展我们的应用程序，维护一个类，当我们需要他们重新运行时，他们会得到通知</p> <h4 id="用法及含义"><a href="#用法及含义" class="header-anchor">#</a> 用法及含义</h4> <ul><li>标准编程观察者模式的依赖类</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span> <span class="token comment">// 依赖类</span>
	<span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 订阅池，当我们调用 notify() 时来运行</span>
	<span class="token punctuation">}</span>
	<span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 收集目标到订阅池</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 如果目标存在且不在订阅池</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> 
	<span class="token punctuation">}</span>
	<span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 重复更新</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">sub</span> <span class="token operator">=&gt;</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 运行</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
<span class="token keyword">let</span> price <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">let</span> quantity <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">let</span> <span class="token function-variable function">target</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> total <span class="token operator">=</span> price <span class="token operator">*</span> quantity <span class="token punctuation">}</span>
dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Add this target to our subscribers</span>
<span class="token function">target</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// Run it to get the total</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// =&gt; 10 .. The right number</span>
price <span class="token operator">=</span> <span class="token number">20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// =&gt; 10 .. No longer the right number</span>
dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment">// Run the subscribers </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment">// =&gt; 40  .. Now the right number</span>
</code></pre></div><h3 id="a-watcher-function-观察者功能"><a href="#a-watcher-function-观察者功能" class="header-anchor">#</a> A Watcher Function 观察者功能</h3> <h4 id="解决的问题-2"><a href="#解决的问题-2" class="header-anchor">#</a> 解决的问题</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">target</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> total <span class="token operator">=</span> price <span class="token operator">*</span> quantity <span class="token punctuation">}</span>
dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token function">target</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre></div><p>更好的封装创建需要监视更新的匿名函数的行为，可修改</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watcher</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	total <span class="token operator">=</span> price <span class="token operator">*</span> quantity
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="用法及含义-2"><a href="#用法及含义-2" class="header-anchor">#</a> 用法及含义</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">watcher</span><span class="token punctuation">(</span><span class="token parameter">myFunc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	target <span class="token operator">=</span> myFunc <span class="token comment">// Set as the active target</span>
	dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment">// Add the active target as a dependency</span>
	<span class="token function">target</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment">// Call the target</span>
	target <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token comment">// Reset the target</span>
<span class="token punctuation">}</span>
</code></pre></div><p>该watcher函数接受一个myFunc参数，将其设置为我们的全局target属性，调用dep.depend() 将我们的目标添加为订阅者，调用该target 函数，然后重置该函数target。</p> <h3 id="object-defineproperty"><a href="#object-defineproperty" class="header-anchor">#</a> Object.defineProperty()</h3> <h4 id="解决的问题-3"><a href="#解决的问题-3" class="header-anchor">#</a> 解决的问题</h4> <p>我们有一个<code>Dep</code>类，我们希望每个变量都要有自己的<code>Dep</code></p> <h4 id="用法及含义-3"><a href="#用法及含义-3" class="header-anchor">#</a> 用法及含义</h4> <ul><li><p>该静态方法允许对对象上的属性进行精确的添加或修改。</p></li> <li><p>对象中存在的属性描述符有两种主要形式：<code>data descriptors</code> 和 <code>accessor descriptors</code></p></li> <li><p>data descriptors</p> <ul><li>value 属性对应的值</li> <li>writable 当且仅当该属性的writable为true时，value才能被赋值运算符改变。默认为 false</li></ul></li> <li><p>accessor descriptors</p> <ul><li>set 当属性值修改时，触发执行该方法。该方法将接受唯一参数，即该属性新的参数值。</li> <li>get 当访问该属性时，该方法会被执行，方法执行时没有参数传入，但是会传入this对象</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">price</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token literal-property property">quantity</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> internalValue <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
	Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Getting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>internalValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> internalValue
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Setting </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
			internalValue <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
total <span class="token operator">=</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>quantity<span class="token punctuation">;</span>
data<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="putting-both-ideas-together-结合"><a href="#putting-both-ideas-together-结合" class="header-anchor">#</a> Putting both ideas together 结合</h3> <h4 id="解决的问题-4"><a href="#解决的问题-4" class="header-anchor">#</a> 解决的问题</h4> <p><code>total = data.price * data.quantity</code></p> <p>当像这样的一段代码运行并获得值时price，我们想要price记住这个匿名函数（target）。这样，如果price更改，或设置为新值，它将触发此函数以重新运行，因为它知道此行依赖于它</p> <ul><li>方案1
<ul><li>get =&gt; (读取属性值的时候) 记住这个匿名函数，当我们的值发生变化时，我们会再次运行它。</li> <li>set =&gt; (设置属性值的时候) 运行保存的匿名函数，我们的值刚改变。</li></ul></li> <li>方案2
<ul><li>调用dep.depend()以保存当前target</li> <li>调用dep.notify()，重新运行全部targets</li></ul></li></ul> <p>让我们结合这两个想法，并完成我们的最终代码。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// dep 类</span>
<span class="token keyword">class</span> <span class="token class-name">Dep</span><span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
	<span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">sub</span> <span class="token operator">=&gt;</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 监听数据每个属性</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> internalValue <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token comment">// 每个属性都获取依赖项实例</span>
	<span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 读取属性值时</span>
			dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 收集依赖（目标）到订阅池</span>
			<span class="token keyword">return</span> internalValue<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 设置属性值</span>
			internalValue <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
			dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重新运行 存储的函数	</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 我的观察者不再调用dep.depend，因为它是从get方法内部调用的。</span>
<span class="token keyword">function</span> <span class="token function">watcher</span><span class="token punctuation">(</span><span class="token parameter">myFunc</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	target <span class="token operator">=</span> myFunc<span class="token punctuation">;</span>
	<span class="token function">target</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">watcher</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	data<span class="token punctuation">.</span>total <span class="token operator">=</span> data<span class="token punctuation">.</span>price <span class="token operator">*</span> data<span class="token punctuation">.</span>quantity
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/observe-data-1.5de7af21.png" alt="data"></p> <ul><li>看到一个紫色数据圈<code>data circle</code> 带有 <code>getter setter</code> 属性</li> <li>每个组件实例有一个 <code>watcher</code> (观察者)实例，
<ul><li>当读取属性值，它从 <code>getter</code>中收集依赖(目标)</li> <li>当设置属性值，它从 <code>setter</code>中通知观察者，从而导致组件重新呈现</li></ul></li> <li>如图：</li></ul> <p><img src="/assets/img/observe-data-2.43c38f98.png" alt="data"></p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>创建一个Dep类来收集依赖项(依赖) 并重新运行所有依赖项(botify)</li> <li>创建一个观察程序来管理我们正在运行的代码，这些代码可能需要作为依赖项添加(目标)</li> <li>使用Object.defineProperty() 为每个属性创建getter setter，让每个属性都有dep实例</li></ul> <p>双向数据绑定 <a href="https://www.vuemastery.com/courses/advanced-components/build-a-reactivity-system/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="vue-attr-listeners-用法"><a href="#vue-attr-listeners-用法" class="header-anchor">#</a> vue $attr $listeners 用法</h2> <h2 id="vue-use"><a href="#vue-use" class="header-anchor">#</a> vue.use()</h2> <h3 id="初始化"><a href="#初始化" class="header-anchor">#</a> 初始化</h3> <ul><li>initGlobalAPI(obj)
<ul><li>initUse(obj)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">.</span><span class="token function-variable function">use</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">plugin</span><span class="token operator">:</span> Function <span class="token operator">|</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> installedPlugins <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_installedPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 已安装的插件</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>installedPlugins<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// additional parameters 传递给函数的参数的类数组对象</span>
	<span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token function">toArray</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token comment">// 将一个或多个元素添加到数组的开头，并返回该数组的新长度</span>
	args<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
	<span class="token comment">// plugin 是对象</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> plugin<span class="token punctuation">.</span>install <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		plugin<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>plugin<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
	<span class="token comment">// plugin 是函数</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> plugin <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">plugin</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 插入到数组池</span>
	installedPlugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>
<span class="token comment">// apply 改变当前函数的this指针</span>
</code></pre></div><ul><li>this指向 一个是当前组件 一个是null</li> <li>会自动阻止多次注册相同插件，届时只会注册一次该插件</li></ul> <p><a href="//css-tricks.com/getting-started-with-vue-plugins/">具体参考</a></p> <h2 id="vue和react组件通信"><a href="#vue和react组件通信" class="header-anchor">#</a> Vue和React组件通信</h2> <p class="tip">
节制地使用 `$parent` 和 `$children` - 它们的主要目的是作为访问组件的应急方法。更推荐用 `props` 和 `events` 实现父子组件通信
</p> <ul><li><p>vue 父组件 传 子组件</p> <ul><li>子组件定义<code>props[可以是数组、对象]</code>来接收父组件的数据
<ul><li>如果直接修改数据
<ul><li>基本类型会提示警告，修改失败</li> <li>引用类型第一级别会提示警告，修改失败；第二级以后父子同时会改变</li></ul></li> <li>如果用一个对象同时设置多个 prop 的时候，父组件可通过<code>v-bind.sync=&quot;doc&quot;</code>设置，则每一个属性 都作为一个独立的 prop 传进去子组件</li></ul></li> <li>父组件可以使用<code>$children</code>来访问子组件实例</li> <li>父组件可以使用<code>$ref</code> 来访问子组件的实例或者DOM元素</li> <li><code>provide(父组件定义) / inject(子组件获取)</code></li> <li><code>$attr / $listeners</code> <ul><li>$attrs 父组件通信子组件</li> <li>子组件通过 $attrs 可以获取没有被子组件作为 props 特性绑定的传递过来的值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>	<span class="token comment">//父组件</span>
	<span class="token operator">&lt;</span><span class="token constant">A</span> msg<span class="token operator">=</span><span class="token string">'1111'</span> df<span class="token operator">=</span><span class="token string">'222'</span><span class="token operator">&gt;</span>
	<span class="token comment">//子组件</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attrs<span class="token punctuation">)</span> <span class="token comment">// 输出 {df:'222'}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><ul><li>子组件可以通过 v-bind='$attrs' 显性的绑定 可手动绑定到子组件的其他位置</li> <li>父组件通信子组件，如果子组件中没有通过props来接受父组件传递的值，那么将会在子组件根元素通过html属性的方式追加</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>	<span class="token comment">//父组件</span>
	<span class="token operator">&lt;</span><span class="token constant">AB</span> msg<span class="token operator">=</span><span class="token string">'1111'</span> sd<span class="token operator">=</span><span class="token string">'2222'</span><span class="token operator">&gt;</span>
	<span class="token comment">//子组件</span>
	<span class="token operator">&lt;</span>div sd<span class="token operator">=</span><span class="token string">'2222'</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
</code></pre></div><ul><li>我们可以通过 inheritAttrs : false 这些默认行为将会被去掉,但是我们还是可以通过$attr获取</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>	<span class="token comment">//父组件</span>
	<span class="token operator">&lt;</span>zi msg<span class="token operator">=</span><span class="token string">'sss'</span> es<span class="token operator">=</span><span class="token string">'eee'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token comment">//子组件</span>
	<span class="token operator">&lt;</span>zi v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">'$attr'</span><span class="token operator">&gt;</span>
	<span class="token comment">//孙组件</span>
	<span class="token operator">&lt;</span>sun<span class="token operator">&gt;</span>
	<span class="token punctuation">{</span>
		<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$attr<span class="token punctuation">)</span> <span class="token comment">// {msg:'sss', es:'eee'}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>v-model</code></li></ul></li> <li><p>vue 子组件 传 父组件</p> <ul><li>子组件可以使用<code>$parent</code>来访问父组件实例</li> <li>子组件通过<code>$emit</code>触发, 触发当前实例上的事件；父组件<code>$on</code>监听当前实例上的自定义事件</li></ul></li> <li><p>vue  非父子组件</p> <ul><li>通过一个事件栈</li> <li>vuex、redux、mobox、Flux</li></ul></li> <li><p>react</p> <ul><li>父组件可以向子组件通过传 props 的方式，向子组件进行通讯。</li> <li>如果父组件与子组件之间不止一个层级，可通过 <code>... 运算符</code><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 通过 ... 运算符 向 Child_1_1 传递 Parent 组件的信息</span>
	<span class="token keyword">class</span> <span class="token class-name">Child_1</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
	  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
		  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
		  <span class="token operator">&lt;</span>Child_1_1 <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">class</span> <span class="token class-name">Child_1_1</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
	  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div></li> <li>子组件向父组件通讯，同样也需要父组件向子组件传递 <code>props</code>进行通讯，只是父组件传递的，是作用域为父组件自身的函数，子组件调用该函数，将子组件想要传递的信息，作为参数，传递到父组件的作用域中</li></ul></li> <li><p>react 兄弟组件间通讯</p> <ul><li>他们有一个共同点同一个父级，所以我们就可以子1传父，父传子2，这样就有一个为题，会导致所有组件（父子）render一遍</li> <li>Flux 与 Redux</li> <li>eventProxy
<ul><li>on、one：on 与 one 函数用于订阅者监听相应的事件，并将事件响应时的函数作为参数，on 与 one 的唯一区别就是，使用 one 进行订阅的函数，只会触发一次，而 使用 on 进行订阅的函数，每次事件发生相应时都会被触发。</li> <li>trigger：trigger 用于发布者发布事件，将除第一参数（事件名）的其他参数，作为新的参数，触发使用 one 与 on 进行订阅的函数。</li> <li>off：用于解除所有订阅了某个事件的所有函数。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// eventProxy.js</span>
	<span class="token string">'use strict'</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> eventProxy <span class="token operator">=</span> <span class="token punctuation">{</span>
	  <span class="token literal-property property">onObj</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token literal-property property">oneObj</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token function-variable function">on</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token function-variable function">one</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token function-variable function">off</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	  <span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> key<span class="token punctuation">,</span> args<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		key <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
		  <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>onObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		  <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
		  <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		  <span class="token punctuation">}</span>
		  <span class="token keyword">this</span><span class="token punctuation">.</span>oneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	  <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">export</span> <span class="token keyword">default</span> eventProxy<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="_1-2-3-map-parseint"><a href="#_1-2-3-map-parseint" class="header-anchor">#</a> [1,2,3].map(parseInt)</h2> <ul><li><p>parseInt() 函数可解析一个字符串，并返回一个整数。</p> <ul><li>string 要被解析的字符串。</li> <li>radix 转化的进制数</li></ul></li> <li><p>array.map(function(currentValue, index,arr){}, thisValue)</p> <ul><li>currentValue 当前元素的值</li> <li>index 当前元素的索引值</li> <li>arr 当前元素属于的数组对象</li> <li>thisValue 对象作为该执行回调时使用，传递给函数，用作 &quot;this&quot; 的值。如果省略了 thisValue ，&quot;this&quot; 的值为 &quot;undefined&quot;</li></ul></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>var parseInt <span class="token operator">=</span> function<span class="token punctuation">(</span>string, radix, obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> string + <span class="token string">&quot;-&quot;</span> + radix + <span class="token string">&quot;-&quot;</span> + obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span>, <span class="token string">&quot;2&quot;</span>, <span class="token string">&quot;3&quot;</span><span class="token punctuation">]</span>.map<span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
// <span class="token punctuation">[</span><span class="token string">&quot;1-0-1,2,3&quot;</span>, <span class="token string">&quot;2-1-1,2,3&quot;</span>, <span class="token string">&quot;3-2-1,2,3&quot;</span><span class="token punctuation">]</span>
// <span class="token string">&quot;-&quot;</span> + obj 导致obj调用toString<span class="token punctuation">(</span><span class="token punctuation">)</span>方法自动转换为了string,相当于连接符
// 第1次遍历：1 + <span class="token string">&quot;-&quot;</span> + <span class="token number">0</span> + <span class="token string">&quot;-&quot;</span> + <span class="token punctuation">[</span><span class="token number">1,2</span>,3<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;1-0-1,2,3&quot;</span>

//toString<span class="token punctuation">(</span><span class="token punctuation">)</span>还有以下几种特殊情况
<span class="token punctuation">[</span><span class="token punctuation">{</span>a:1<span class="token punctuation">}</span>,<span class="token punctuation">{</span>b:2<span class="token punctuation">}</span><span class="token punctuation">]</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>//<span class="token string">&quot;[object Object],[object Object]&quot;</span>
<span class="token punctuation">[</span><span class="token number">1,2</span><span class="token punctuation">]</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>//<span class="token string">&quot;1,2&quot;</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1,2</span><span class="token punctuation">]</span>,<span class="token punctuation">[</span><span class="token number">3,4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>//<span class="token string">&quot;1,2,3,4&quot;</span>
</code></pre></div><p>我们还需要了解进制数的相关知识：</p> <p>二进制的定义：用0和1两个数码来表示的数。</p> <p>三进制的定义：用0和1，2三个数码来表示的数......</p> <p>十进制的定义：用0和1，2，3...9十个数码来表示的数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//以2为基数，
parseInt<span class="token punctuation">(</span><span class="token string">'1'</span>, <span class="token number">2</span><span class="token punctuation">)</span>//1
parseInt<span class="token punctuation">(</span><span class="token string">'2'</span>, <span class="token number">2</span><span class="token punctuation">)</span>//NaN
parseInt<span class="token punctuation">(</span><span class="token string">'3'</span>, <span class="token number">2</span><span class="token punctuation">)</span>//NaN
parseInt<span class="token punctuation">(</span><span class="token string">'10'</span>,2<span class="token punctuation">)</span>//2
//以3为基数，
parseInt<span class="token punctuation">(</span><span class="token string">'1'</span>, <span class="token number">3</span><span class="token punctuation">)</span>//1
parseInt<span class="token punctuation">(</span><span class="token string">'2'</span>, <span class="token number">3</span><span class="token punctuation">)</span>//2
parseInt<span class="token punctuation">(</span><span class="token string">'3'</span>, <span class="token number">3</span><span class="token punctuation">)</span>//NaN
parseInt<span class="token punctuation">(</span><span class="token string">'10'</span>,3<span class="token punctuation">)</span>//3
//以4为基数，
parseInt<span class="token punctuation">(</span><span class="token string">'1'</span>, <span class="token number">4</span><span class="token punctuation">)</span>//1
parseInt<span class="token punctuation">(</span><span class="token string">'2'</span>, <span class="token number">4</span><span class="token punctuation">)</span>//2
parseInt<span class="token punctuation">(</span><span class="token string">'3'</span>, <span class="token number">4</span><span class="token punctuation">)</span>//3
parseInt<span class="token punctuation">(</span><span class="token string">'4'</span>, <span class="token number">4</span><span class="token punctuation">)</span>//NaN
parseInt<span class="token punctuation">(</span><span class="token string">'10'</span>,4<span class="token punctuation">)</span>//4

<span class="token punctuation">[</span><span class="token string">'1'</span>,<span class="token string">'2'</span>,<span class="token string">'3'</span><span class="token punctuation">]</span>.map<span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span>
//  parseInt<span class="token punctuation">(</span><span class="token string">'1'</span>, <span class="token number">0</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> <span class="token number">1</span>   // <span class="token assign-left variable">radix</span><span class="token operator">=</span><span class="token number">0</span>,以10为基数解析 <span class="token number">1</span>*10^1+0*10^0<span class="token operator">=</span><span class="token number">10</span>
//  parseInt<span class="token punctuation">(</span><span class="token string">'2'</span>, <span class="token number">1</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> NaN // <span class="token assign-left variable">radix</span><span class="token operator">=</span><span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token number">2</span>,返回NaN
//  parseInt<span class="token punctuation">(</span><span class="token string">'3'</span>, <span class="token number">2</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> NaN // <span class="token number">3</span>无法转成二进制
//即遍历后结果为 <span class="token punctuation">[</span><span class="token number">1</span>,NaN,NaN<span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token number">1,2</span>,3,4,3,4,6,8,9, <span class="token number">99</span>, <span class="token number">888</span><span class="token punctuation">]</span>.map<span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span>
// <span class="token punctuation">[</span><span class="token number">1</span>, NaN, NaN, NaN, <span class="token number">3</span>, <span class="token number">4</span>, NaN, NaN, NaN, NaN, <span class="token number">888</span><span class="token punctuation">]</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>我们可以这样理解，二进制里没有2，3，...9,三进制里没有3，4...9,四进制里没有4，5...9
即当string无法转成radix基数时会返回NaN</p></div> <h2 id="throttle-debounced"><a href="#throttle-debounced" class="header-anchor">#</a> throttle debounced</h2> <p>防抖和节流的作用都是防止函数多次调用。都是上次执行函数空闲时间大于await就会执行，但是防抖的话如果用户一直触发这个函数那么会一直从新计算await时间，直到空闲时间大于await；</p> <h3 id="throttle-节流"><a href="#throttle-节流" class="header-anchor">#</a> throttle 节流</h3> <ul><li>在特定间隔内调用函数</li> <li>节流是使重复事件发生率的降低</li> <li>适用于在调整大小和滚动等事件上限制处理程序执行速率</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ready <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ready<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        ready <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            ready <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="debounce-去抖"><a href="#debounce-去抖" class="header-anchor">#</a> debounce 去抖</h3> <ul><li>在一定时间内仅调用一次函数</li> <li>去抖可确保为可能发生多次的事件恰好发生一次</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="js-克隆"><a href="#js-克隆" class="header-anchor">#</a> js 克隆</h2> <h3 id="深克隆"><a href="#深克隆" class="header-anchor">#</a> 深克隆</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>obj<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span>obj<span class="token punctuation">)</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>


</code></pre></div><p><code>Object.assign({},)</code> 无法实现多层深拷贝</p> <p>只针对  object number string boolean date function</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token function">_clone</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">_cloneRegExp</span><span class="token punctuation">(</span><span class="token parameter">pattern</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>source<span class="token punctuation">,</span> 
        <span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>global <span class="token operator">?</span> <span class="token string">'g'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
        <span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>ignoreCase <span class="token operator">?</span> <span class="token string">'i'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span>
        <span class="token comment">// (pattern.multiline ? 'm' : '') +</span>
		<span class="token comment">// (pattern.sticky ? 'y' : '') +</span>
		<span class="token comment">// (pattern.unicode ? 'u' : '')</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
  *复制一个对象。
  *
  * @私人的
  * @param {*} value要复制的值
  * @param {Array} refFrom包含源引用的数组
  * @param {Array} refTo包含复制的源引用的数组
  * @param {Boolean} deep是否执行深度克隆。
  * @return {*}复制的值。
*/</span>
<span class="token keyword">function</span> <span class="token function">_clone</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> refFrom<span class="token punctuation">,</span> refTo<span class="token punctuation">,</span> deep</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token function-variable function">copy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token parameter">copiedValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> len <span class="token operator">=</span> refFrom<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
		<span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>idx <span class="token operator">&lt;</span> len<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">===</span> refFrom<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> refTo<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>
			<span class="token punctuation">}</span>
			idx <span class="token operator">+=</span> <span class="token number">1</span>
		<span class="token punctuation">}</span>
		refFrom<span class="token punctuation">[</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
		refTo<span class="token punctuation">[</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> copiedValue<span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// copiedValue[key] = deep ? _clone(value[key], refFrom, refTo, true) : value[key]</span>
			copiedValue<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">_clone</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> refFrom<span class="token punctuation">,</span> refTo<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> copiedValue<span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
	<span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token string">'Object'</span> <span class="token operator">:</span> <span class="token keyword">return</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string">'Array'</span> <span class="token operator">:</span> <span class="token keyword">return</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string">'Date'</span> <span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token string">'RegExp'</span> <span class="token operator">:</span> <span class="token keyword">return</span> <span class="token function">_cloneRegExp</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span> <span class="token operator">:</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="手写bind"><a href="#手写bind" class="header-anchor">#</a> 手写bind</h2> <p><a href="//tc39.github.io/ecma262/#sec-function.prototype.bind">规范</a></p> <p><code>bind()</code> 方法创建一个新的函数，该新函数在被调用时<code>新函数的this</code>指针指向传入的值</p> <ul><li><p>语法<code>function.bind(thisArg,arg....)</code></p> <ul><li>thisArg:
<ul><li>调用绑定函数时，此参数将作为目标函数（新函数）的<code>this</code></li> <li>使用new运算符构造绑定函数，则忽略该值</li> <li>当使用bind在setTimeout中创建一个函数（作为回调提供）时，作为thisArg传递的任何原始值都将转换为object</li> <li>如果bind函数的参数列表为空，执行作用域的this将被视为新函数的thisArg</li></ul></li> <li>返回值：返回一个原函数的拷贝，并拥有指定的<code>this</code>值和初始参数</li></ul></li> <li><p>原理 bind()函数会创建一个新绑定函数，绑定函数具有以下属性</p> <ul><li>包装的函数（原函数）对象</li> <li>this</li> <li>参数列表</li> <li>this与包装函数关联代码<code>[[call]]</code></li></ul></li></ul> <p>当调用绑定函数时，他调用<code>包装的函数对象</code>上面的内部方法<code>[[call]]</code>,就像<code>call(this, 参数列表)</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 简易版，没有在绑定函数上使用new，可参考</span>

<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> thatFunc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> thatFunc <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'如果不是函数就没有call方法'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> slice <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">;</span><span class="token comment">// 将数组的一部分进行浅拷贝</span>
	<span class="token keyword">let</span> thatArg <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 获取第一个参数</span>
	<span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取剩余参数并转为数组</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">let</span> funcArgs <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 合并传入参数</span>
		<span class="token keyword">return</span> <span class="token function">thatFunc</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thatArg<span class="token punctuation">,</span> funcArgs<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 改变新函数this，并传入参数，执行</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// + 让 目标 成为this</span>
<span class="token comment">// + 是否是一个包含[[call]]内部方法的有效函数，如果不是`TypeError` [1]</span>
<span class="token comment">// + args 是一个新的集合，它是由除thisArg以外所有参数组成 [2]</span>
<span class="token comment">// + 创建一个 包装函数 [3]</span>
<span class="token comment">// + return 包装函数</span>
<span class="token comment">// https://tc39.github.io/ecma262/#sec-function.prototype.bind</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Function<span class="token punctuation">.</span>bind <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">that</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> $<span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// [1]</span>
		<span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'is not function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> partArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2]</span>
	<span class="token keyword">var</span> <span class="token function-variable function">boundFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// [3]</span>
		<span class="token keyword">var</span> args <span class="token operator">=</span> partArgs<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 合并参数</span>
		<span class="token comment">// 1 this 是不是boundFunction 的实例 说明返回的boundFunction被当做new的构造函数调用</span>
		<span class="token keyword">return</span> $<span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">boundFunction</span> <span class="token operator">?</span>
			<span class="token function">construct</span><span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>length<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
			<span class="token comment">// new $this(args.join())</span>
			<span class="token operator">:</span> 
			$<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">$this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// 维护原型，不然无法访问原型内方法</span>
		boundFunction<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">$this</span><span class="token punctuation">.</span>prototype
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> boundFunction<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> factories <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">C</span><span class="token punctuation">,</span> argsLength<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>argsLength <span class="token keyword">in</span> factories<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argsLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a['</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">']'</span><span class="token punctuation">;</span>
		factories<span class="token punctuation">[</span>argsLength<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Function</span><span class="token punctuation">(</span><span class="token string">'C,a'</span><span class="token punctuation">,</span> <span class="token string">'return new C('</span> <span class="token operator">+</span> list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> factories<span class="token punctuation">[</span>argsLength<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li><a href="//tc39.github.io/ecma262/#sec-function.prototype.bind">规范</a></li> <li><a href="//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">MDN-bind</a></li></ul> <h2 id="点击li-输出其索引-0-1-2"><a href="#点击li-输出其索引-0-1-2" class="header-anchor">#</a> 点击li，输出其索引 0 1 2</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'ul li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ul<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		item<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token function">alert</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="jsonp原理"><a href="#jsonp原理" class="header-anchor">#</a> JSONP原理</h2> <p>浏览器同源策略</p> <ul><li><p>跨越方式：不同协议、不同端口、不同域名</p></li> <li><p>可嵌入跨源的资源的一些示例</p> <ul><li><code>script</code>、<code>link</code>、<code>img</code>、<code>video</code>、<code>object</code>、<code>@font-face</code>、<code>iframe</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sajax</span><span class="token punctuation">(</span><span class="token parameter">request</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> callback <span class="token operator">=</span> request<span class="token punctuation">.</span>jsonpCallback <span class="token operator">||</span> <span class="token string">'_jsonp'</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			body <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
			handler<span class="token punctuation">,</span>
			script<span class="token punctuation">;</span>
			<span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>type<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'load'</span> <span class="token operator">&amp;&amp;</span> body <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					status <span class="token operator">=</span> <span class="token number">200</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					status <span class="token operator">=</span> <span class="token number">500</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>status <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">delete</span> window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">;</span>
					document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">resolve</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> status<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
	
			<span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>request<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;callback=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>onload <span class="token operator">=</span> handler<span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>onerror <span class="token operator">=</span> handler<span class="token punctuation">;</span>
			fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
			document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="session、cookie、token"><a href="#session、cookie、token" class="header-anchor">#</a> session、cookie、token</h2> <p>因为HTTP是无状态的（无法保存状态），会话使HTTP变为有状态。</p> <ul><li>cookie
<ul><li>定义：是在浏览器端一个储存少量资料的空间。当浏览器跟server互动时cookie就会随着http request、response来回传送</li> <li>特点
<ul><li>有少量存储空间 4kb</li> <li>特定网域：不可跨不同域名</li> <li>有时效限制：到了设定的生命期之后会失效</li> <li>cookie容易被修改，如果数据量大影响传输效率，为解决此问题出现了session</li></ul></li></ul></li> <li>session
<ul><li>定义：是存储在服务器上并与给定用户相关联的数据集合</li> <li>特点：
<ul><li>session依赖cookie</li></ul></li> <li>取消session
<ul><li>主动删除cookie</li> <li>从网站登出</li> <li>设置失效时间</li></ul></li> <li>session存储方式
<ul><li>内存</li> <li>cookie</li> <li>缓存 redis memcache</li> <li>资料库</li></ul></li></ul></li> <li>如何防止攻擊
<ul><li>session 记录ip，如使用者換IP就得重新取得</li> <li>cookie 防止 XSS &amp; CSRF</li></ul></li> <li>sessionStorage、localStorage
<ul><li>local的数据可以长期保存，页面关闭sessionstorage数据被清除</li> <li>local无过期时间设置</li></ul></li></ul> <h2 id="margin-无效情形解析"><a href="#margin-无效情形解析" class="header-anchor">#</a> margin 无效情形解析</h2> <div class="custom-block tip"><p class="custom-block-title">先来看看 [W3C](//www.w3.org/TR/CSS2/box.html#collapsing-margins) 对于外边距叠加的定义：</p> <p>In CSS, the adjoining margins of two or more boxes (which might or might not be siblings) can combine to form a single margin. Margins that combine this way are said to collapse, and the resulting combined margin is called a collapsed margin.</p></div> <ul><li><p>什么是margin合并：在CSS中，两个或多个毗邻的普通流中的盒子（可能是父子元素，也可能是兄弟元素）在垂直方向上的外边距会发生叠加，这种形成的外边距称之为外边距叠加。</p> <ul><li>毗邻: 毗邻说明了他们的位置关系，没有被 <code>padding</code>、<code>border</code>、<code>clear</code> 和 <code>line box</code> 分隔开</li> <li>两个或多个: 两个或多个盒子是指元素之间的相互影响，单个元素不会存在外边距叠加的情况</li> <li>垂直方向: 只有垂直方向的外边距会发生外边距叠加。水平方向的外边距不存在叠加的情况。</li> <li>普通流 : <code>An element is called out of flow if it is floated, absolutely positioned, or is the root element. An element is called in-flow if it is not out-of-flow. The flow of an element A is the set consisting of A and all in-flow elements whose nearest out-of-flow ancestor is A.</code></li></ul></li> <li><p>margin合并的意义：特种特性是故意这么设计的；</p> <ul><li>兄弟合并：都是让图文信息的排版更加舒服自然，合并机制可以保证元素上下间距一致</li> <li>父子合并：在页面中任何地方嵌套或直接放入任何裸<code>&lt;div&gt;</code>，都不会 影响原来的块状布局</li> <li>自身合并（空块元素）：义在于可以避免不小心遗落或者生成的空标签影响排版和布局</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>第一行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>第二行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
// 其和下面这段 HTML 终视觉效果是一模一样的： 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>第一行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>第二行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> 
// 若是没有自身 margin 合并特性的话，怕是上面的 HTML 第一行和第二行之间要隔了很多 行吧。 
</code></pre></div><p>知道了 margin 合并的意义以及作用，而且合并规则的兼容性良好，所以，我自己平时网 页制作的时候，遇到列表或者模块，全部都是保留上下 margin 设置。例如：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.list</span> <span class="token punctuation">{</span>   <span class="token property">margin-top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span> <span class="token punctuation">}</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
// 而不是战战兢兢地使用：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.list</span> <span class="token punctuation">{</span>   <span class="token property">margin-top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span><span class="token punctuation">}</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>因为 margin 合并特性，所以我们无须担心列表之间的间距会很大。不会的，就是 15px！ 相反，这种设置让我们的页面结构容错性更强了，比方说后一个元素移除或位置调换，均不 会破坏原来的布局，也就是我们的 CSS 无须做任何调整。</p> <h2 id="iife-立即调用函数表达式"><a href="#iife-立即调用函数表达式" class="header-anchor">#</a> IIFE 立即调用函数表达式</h2> <ul><li>Function Declaration 函数声明<div class="language-js extra-class"><pre class="language-js"><code>	<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div></li> <li>Function Expression 函数表达式<div class="language-js extra-class"><pre class="language-js"><code>	<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token operator">+</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token boolean">true</span> <span class="token operator">===</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 如何改成立即执行函数</span>
<span class="token operator">+</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">2</span><span class="token operator">===</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="./js-function">我们要记住FE和FD之间的区别</a></p> <h2 id="如何写一个函数f-new-f-f"><a href="#如何写一个函数f-new-f-f" class="header-anchor">#</a> 如何写一个函数F，new F === F？</h2> <p>这里考察new 构造函数返回的是一个什么</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token constant">F</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">F</span> <span class="token operator">===</span> <span class="token constant">F</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_0-1-0-2-0-3"><a href="#_0-1-0-2-0-3" class="header-anchor">#</a> 0.1+0.2 !== 0.3</h2> <p><a href="http://0.30000000000000004.com/" target="_blank" rel="noopener noreferrer">http://0.30000000000000004.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>现在大多数语言采用“使用了IEEE754浮点数格式” IEEE二进制浮点数算术标准
然而约定是 它用科学记数法以底数为2的小数来表示浮点数
对于十进制整数N，必要时表示为N10以与二进制的数的表示N2相区分。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>十进制中，10的素数(是指在大于1的自然数中，除了1和它本身以外不再有其他因数的自然数)是2，5.
因此，由于分母都使用10的素数，所以1/2、1/4、1/5、1/8和1/10都可以清楚地表示。 1/3、1/6和1/7都是重复的小数，因为它们的分母使用3或7的质数。
在二进制中，只有唯一的质数是2.因此，您只能清楚地表达小数仅包含2作为主要因子。以二进制形式，1 / 2、1 / 4、1 / 8都将干净地表示为小数。而1/​​5或1/10将重复小数。
因此，在以10为基数的系统中使用干净的小数时，0.1和0.2（1/10和1/5）在计算机运行的以2为基数的系统中重复小数。</p></div> <h2 id="flex概念"><a href="#flex概念" class="header-anchor">#</a> flex概念</h2> <p><code>flexbox</code>，是一种一维的布局模型。它给 <code>flexbox</code> 的子元素之间提供了强大的空间分布和对齐能力。</p> <p>我们说 <code>flexbox</code> 是一种一维的布局，是因为一个 <code>flexbox</code> 一次只能处理一个维度上的元素布局，一行或者一列。作为对比的是另外一个二维布局 <code>CSS Grid Layout</code>，可以同时处理行和列上的布局。</p> <h2 id="css-多行-单行省略"><a href="#css-多行-单行省略" class="header-anchor">#</a> css 多行/单行省略</h2> <h2 id="函数柯里化-高阶函数"><a href="#函数柯里化-高阶函数" class="header-anchor">#</a> 函数柯里化 --- 高阶函数</h2> <p>一种将使用多个参数的一个函数转换成一系列使用一个参数的函数的技术。</p> <p>currying 又称部分求值。一个 currying 的函数首先会接受一些参数，接受了这些参数之后， 该函数并不会立即求值，而是继续返回另外一个函数，刚才传入的参数在函数形成的闭包中被保存起来。待到函数被真正需要求值的时候，之前传入的所有参数都会被一次性用于求值。</p> <h3 id="柯里化的好处"><a href="#柯里化的好处" class="header-anchor">#</a> 柯里化的好处</h3> <ul><li>代码复用、参数复用（闭包）、bind方法、延迟执行</li> <li>闭包消耗内存、递归效率差、arguments变量存取慢访问性差</li></ul> <h2 id="cdn-优化有哪些"><a href="#cdn-优化有哪些" class="header-anchor">#</a> CDN 优化有哪些</h2> <ul><li>减少距离--减少客户端与请求数据之间的物理距离</li> <li>硬件、软件优化</li> <li>减少数据传输--采用减少文件大小的技术，以便快速进行初始页面加载</li></ul> <h2 id="webpack-loader原理"><a href="#webpack-loader原理" class="header-anchor">#</a> webpack  loader原理</h2> <ul><li><a href="//webpack.docschina.org/concepts/loaders/">官网</a></li></ul> <p>首先要明白loader是干嘛的：
loader用于对模块的源代码进行转换。loader 可以使你在 import 或&quot;加载&quot;模块时预处理文件。
因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。
loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 data URL。
loader 甚至允许你直接在 JavaScript 模块中 import CSS文件！</p> <p>loader 特性：支持链式传递，可以同步可以异步，等</p> <h3 id="编写"><a href="#编写" class="header-anchor">#</a> 编写</h3> <p>loader是继承为一个函数的节点模块。该函数在loader转换资源的时候调用。给定的函数将调用loader API，并通过this上下文访问</p> <p>loader 安装使用方法</p> <ul><li>resolveLoader.moduels</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">,</span> <span class="token string">'loaders'</span><span class="token punctuation">]</span> <span class="token comment">// 先从node_modules中查找，没有从loaders文件夹中查找loader1.js</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'loader1'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>resolveLoader.alias</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">// 绝对路径</span>
      <span class="token literal-property property">loader1</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'loaders'</span><span class="token punctuation">,</span> <span class="token string">'loader1.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>loader的绝对路径</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'loaders'</span><span class="token punctuation">,</span> <span class="token string">'loader1.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>npm 安装</li></ul> <p>loader 的标准</p> <p>https://www.bbsmax.com/A/obzbjKoMzE/</p> <h2 id="条件比较多的时候-if-else-和-switch-性能哪个高"><a href="#条件比较多的时候-if-else-和-switch-性能哪个高" class="header-anchor">#</a> 条件比较多的时候 if-else 和 switch 性能哪个高</h2> <p>条件比较多就倾向于switch. if-else的附加条件的增量成本大于switch的增量成本
一般来说，如果有两个不同范围或几个不同范围的值要测试，那么最好使用if else。当要测试的范围超过两个时，switch语句是最理想的选择。</p> <p>switch 使用全等运算符，不会发生类型转换的消耗</p> <p>使用嵌套语句，减少判断次数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result0<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result1<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result2<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result3<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result4<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result5<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result6<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result7<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result8<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> result9<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result10<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result1<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> result2<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result3<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result4<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> result5<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result6<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> result7<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result8<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> result9<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> result10<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>我们可以使用数组或对象 查找表的方式，性能最好</p></div> <h2 id="_0-1-1-2-3-5-8-假设第-0-个是-0-第-1-个是-1-求第-n-个数的实现方式"><a href="#_0-1-1-2-3-5-8-假设第-0-个是-0-第-1-个是-1-求第-n-个数的实现方式" class="header-anchor">#</a> 0 1 1 2 3 5 8，假设第 0 个是 0，第 1 个是 1，求第 n 个数的实现方式？</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">===</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> m <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> m <span class="token operator">=</span><span class="token function">a</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">a</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="nth-child-匹配父级子元素"><a href="#nth-child-匹配父级子元素" class="header-anchor">#</a> nth-child 匹配父级子元素</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">p</span><span class="token operator">:</span>nth<span class="token operator">-</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter">odd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// 奇数 2n+1</span>
<span class="token punctuation">}</span>
<span class="token literal-property property">p</span><span class="token operator">:</span>nth<span class="token operator">-</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter">even</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// 偶数 2n+2</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="选择器优先级-在任何情况下都会遵循优先级吗"><a href="#选择器优先级-在任何情况下都会遵循优先级吗" class="header-anchor">#</a> 选择器优先级？在任何情况下都会遵循优先级吗？</h2> <p>优先级是基于不同种类选择器组成的匹配规则</p> <p>优先级就是分配给指定的 CSS 声明的一个权重，它由 匹配的选择器中的 每一种选择器类型的 数值 决定。</p> <ul><li>类型选择器：标签<code>&lt;html&gt;</code>、伪元素<code>::after</code></li> <li>类选择器：<code>class</code>、属性选择器<code>[type=&quot;XX&quot;]</code>、伪类<code>:hover</code></li> <li>ID 选择器</li></ul> <p>通配选择符<code>（universal selector）（*）</code>关系选择符<code>（combinators）（+, &gt;, ~, ' ', ||）</code>和 否定伪类<code>（negation pseudo-class）（:not()）</code>对优先级没有影响。（但是，在 <code>:not()</code>内部声明的选择器会影响优先级）。</p> <p>给元素添加的内联样式 (例如，<code>style=&quot;font-weight:bold&quot;</code>) 总会覆盖外部样式表的任何样式 ，因此可看作是具有最高的优先级。</p> <p>important&gt;内联&gt;id&gt;class = 属性 = 伪类 &gt;标签 = 伪元素 &gt; 通配符（*）</p> <ul><li>important 优先级最高</li> <li>:not() 否定伪类在优先级计算中不会被看作是伪类
<ul><li>可以利用这个伪类提高规则的优先级。例如，<code>#foo:not(#bar)</code> 和<code>#foo</code>会匹配相同的元素，但是前者的优先级更高。</li></ul></li></ul> <h2 id="伪元素和伪类有哪些-为什么要有伪类和伪元素-为什么伪元素用一个冒号也可以"><a href="#伪元素和伪类有哪些-为什么要有伪类和伪元素-为什么伪元素用一个冒号也可以" class="header-anchor">#</a> 伪元素和伪类有哪些？为什么要有伪类和伪元素？为什么伪元素用一个冒号也可以？</h2> <ul><li><a href="//developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-elements">伪元素</a> <ul><li><code>::after</code>、<code>::before</code>、<code>::first-line</code>、<code>::selection</code>、<code>::cue (:cue)</code>、<code>::placeholder</code>、<code>::first-letter (:first-letter)</code>、<code>::slotted()</code></li></ul></li> <li><a href="//developer.mozilla.org/zh-CN/docs/Web/CSS/Pseudo-classes">伪类</a> <ul><li><code>:link</code>、<code>:hover</code>、<code>:active</code>、<code>:first-child</code>、<code>:focus</code>、<code>:last-child</code>。。。。</li></ul></li></ul> <h2 id="css的margin-top、padding-top、translate-x、background-size、line-height、分别相对于谁"><a href="#css的margin-top、padding-top、translate-x、background-size、line-height、分别相对于谁" class="header-anchor">#</a> css的margin-top、padding-top、translate-x、background-size、line-height、分别相对于谁？</h2> <h2 id="对于传进来null-会不会触发默认赋值。"><a href="#对于传进来null-会不会触发默认赋值。" class="header-anchor">#</a> 对于传进来null，会不会触发默认赋值。</h2> <ul><li>es5 会</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	d <span class="token operator">=</span> d <span class="token operator">||</span> <span class="token string">''</span>
	<span class="token keyword">return</span> d
<span class="token punctuation">}</span>
<span class="token comment">// null,NaN,undefined,'',0 都会触发默认fu值</span>
</code></pre></div><ul><li>es6 不会</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">d <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> d
<span class="token punctuation">}</span>
<span class="token comment">// null,NaN,'' 不会触发默认赋值 kong会</span>
</code></pre></div><h2 id="es6数组扁平化方法的polyfill"><a href="#es6数组扁平化方法的polyfill" class="header-anchor">#</a> ES6数组扁平化方法的polyfill</h2> <p><code>falt()</code></p> <h2 id="看了哪些前端的书籍了"><a href="#看了哪些前端的书籍了" class="header-anchor">#</a> 看了哪些前端的书籍了？</h2> <ul><li>阮一峰（ECMAScript 6 入门）</li> <li>张鑫旭（CSS世界）</li> <li>你不知道的js</li></ul> <h2 id="bfc布局规则"><a href="#bfc布局规则" class="header-anchor">#</a> BFC布局规则</h2> <h4 id="含义"><a href="#含义" class="header-anchor">#</a> 含义：</h4> <p>块级元素格式化上下文。它决定了块级元素如何对它的内容进行布局，以及与其他元素的关系和相互关系</p> <p>BFC里的元素与外面的元素不会发生影响</p> <h4 id="触发条件"><a href="#触发条件" class="header-anchor">#</a> 触发条件</h4> <p>1.float的值不为none</p> <p>2.overflow的值不为visible</p> <p>3.display的值为table-cell、tabble-caption和inline-block之一</p> <p>4.position的值为absolute或fixed</p> <p>5.html跟元素</p> <h4 id="规则"><a href="#规则" class="header-anchor">#</a> 规则</h4> <p>1.计算BFC的高度时，浮动元素也参与计算</p> <p>2.BFC的区域不会与float box重叠</p> <p>3.同一个BFC中两个相邻的box的上下margin会重叠</p> <h2 id="声明一个函数fn-对其使用typeof-结果返回什么-然后我给fn添加一个属性-请问会报错吗-为什么"><a href="#声明一个函数fn-对其使用typeof-结果返回什么-然后我给fn添加一个属性-请问会报错吗-为什么" class="header-anchor">#</a> 声明一个函数fn,对其使用typeof,结果返回什么？然后我给fn添加一个属性，请问会报错吗？为什么？</h2> <p>返回 &quot;function&quot;, 不会报错，函数是第一类对象（first-class objects），或者说它们被称作一等公民（first-class citizens）。
函数与对象共存，函数也可以被视为其他任意类型的JavaScript对象。
函数和那些更普通的JavaScript数据类型一样，它能被变量引用，能以字面量形式声明，甚至能被作为函数参数进行传递。<br>
对象能做的任何一件事，函数也都能做。函数也是对象，唯一的特殊之处在于它是可调用的（invokable），即函数会被调用以便执行某项动作。</p> <h2 id="es6中-promise能实现异步的原理是什么-我new一个promise-然后对这个promise实例使用typeof-结果是什么-promise实例接收的参数是一个函数-函数接收两个参数一个resolve-一个reject-为什么resolve后可以实现继续执行后续代码"><a href="#es6中-promise能实现异步的原理是什么-我new一个promise-然后对这个promise实例使用typeof-结果是什么-promise实例接收的参数是一个函数-函数接收两个参数一个resolve-一个reject-为什么resolve后可以实现继续执行后续代码" class="header-anchor">#</a> ES6中，promise能实现异步的原理是什么？我new一个promise,然后对这个promise实例使用typeof，结果是什么？promise实例接收的参数是一个函数，函数接收两个参数一个resolve,一个reject,为什么resolve后可以实现继续执行后续代码？</h2> <p>promise表示异步操作的最终结果，他有三种状态但是不可逆的。
resolve返回一个新的peomise对象</p> <h2 id="css-单行文本居中显示-多行文本左对齐"><a href="#css-单行文本居中显示-多行文本左对齐" class="header-anchor">#</a> css 单行文本居中显示，多行文本左对齐</h2> <p>父级 <code>text-align:center;</code>
子级 <code>text-align:left;display:inline-block;</code>
或
当前文本元素 <code>display: flex;justify-content: center;</code></p> <h2 id="为什么你老是讲不清楚js的继承模式"><a href="#为什么你老是讲不清楚js的继承模式" class="header-anchor">#</a> 为什么你老是讲不清楚js的继承模式</h2> <ul><li>原型链继承
关键：把子类的原型指向父类的实例，从而继承父类的私有属性和原型属性<div class="language-js extra-class"><pre class="language-js"><code>	<span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
	<span class="token punctuation">}</span>

	<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setSex</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token punctuation">}</span>

	<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'DBCDouble'</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
</code></pre></div><ul><li>优点：父类新增原型属性和方法，子类实例都能访问到。简单、易用</li> <li>缺点：无法实现多继承。创建子类实例的时候，无法向父类构造函数传参。有子类实例共享父类引用属性的问题</li></ul></li> <li>借用父类构造函数继承
关键：在子类构造函数中使用call或者apply调用父类构造函数实现父类私有属性继承（函数复用）<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>

<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setSex</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> sex<span class="token punctuation">)</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'DBCdouble'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
</code></pre></div><ul><li>优点：可以实现多继承。解决了原型链继承中子类实例共享父类引用属性的问题。创建子类实例时，可以向父类传递参数。</li> <li>缺点：只继承父类的实例属性(私有属性)，没有继承父类的原型属性。每次创建子类实例时，都要调用一次父类构造函数，影响性能</li></ul></li> <li>组合式继承(原型链继承 + 借用构造函数继承)
关键：通过调用父类构造函数，继承父类的属性并保留传参的优点，并通过Object.create(Parent.prototype)来创建继承了父类原型属性的对象，并把这个对象赋给子类的原型，这样的话，既能保证父类构造函数不用执行两次，又能让子类能继承到父类的原型方法<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>

<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setSex</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> sex<span class="token punctuation">)</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son
<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'DBCdouble'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
</code></pre></div><ul><li>优点：创建子类实例时，可以向父类传递参数。可以实现多继承。解决了原型链继承中子类实例共享父类引用属性的问题。父类构造函数只用执行一次。</li></ul></li> <li>ES6的class继承
ES6中引入了class关键字，class可以通过extends关键字实现继承，还可以通过static关键字定义类的静态方法，这比 ES5 的通过修改原型链实现继承，要清晰和方便很多。
关键：使用extends关键字继承父类的原型属性，调用super来继承父类的实例属性，且保留向父类构造函数传参的优点<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
<span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>
<span class="token function">showSex</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这里是父类的方法'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
<span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">super</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">showSex</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这里是子类的方法'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token string">'DBCDOUBLE'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// super指的就是父类构造函数</span>
<span class="token comment">// 子类继承父类的实例属性最终还是通过call或者apply来实现继承的</span>
<span class="token comment">// 通过extends方法的调用来修改子类和父类的原型链关系</span>

<span class="token comment">// extends做了以下几件事：</span>

<span class="token comment">// 定义了一个function __() {}函数，并把该函数的constructor指向了子类</span>
<span class="token comment">// 紧接着，把function __() {} 函数的原型指向了父类的原型</span>
<span class="token comment">// 最后再把function () {} 函数的实例赋给了子类函数，就这样子类的实例就能沿着proto.proto获取到父类的原型属性了，这种继承模式俗称圣杯模式</span>

</code></pre></div><ul><li>优点：简单易用，不用自己来修改原型链来完成继承</li></ul></li></ul> <h2 id="面向对象"><a href="#面向对象" class="header-anchor">#</a> 面向对象</h2> <p>多态：不同类可以定义相同的方法或属性。
继承：一个类可以继承另一个类的特征
封装：一种把数据和相关的方法绑定在一起使用的方法。
命名空间：
构造函数：</p> <h2 id="add-1-2-3"><a href="#add-1-2-3" class="header-anchor">#</a> add(1)(2)(3)</h2> <ul><li>柯理化 参考 https://ramdajs.com/</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> sum <span class="token operator">=</span> n<span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token function-variable function">tmp</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> m<span class="token punctuation">;</span>
    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
	<span class="token comment">//   tmp.toString = function(){return sum};</span>
  <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 第一次执行时，定义一个数组专门用来存储所有的参数</span>
    <span class="token keyword">var</span> _args <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在内部声明一个函数，利用闭包的特性保存_args并收集所有的参数值</span>
    <span class="token keyword">var</span> <span class="token function-variable function">_adder</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> _adder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 利用toString隐式转换的特性，当最后执行时隐式转换，并计算最终的值返回</span>
    _adder<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> _args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _adder<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h2> <h3 id="存储"><a href="#存储" class="header-anchor">#</a> 存储</h3> <ul><li>localStorage</li> <li>sessionStorage</li> <li>webSql</li> <li>indexedBD</li></ul> <h3 id="http缓存-浏览器缓存"><a href="#http缓存-浏览器缓存" class="header-anchor">#</a> http缓存（浏览器缓存）</h3> <p>浏览器缓存策略分为两种：强缓存和协商缓存</p> <p>相同点：如果命中，都是从客户端缓存（读取）中加载资源，而不是从服务器（读取）加载资源数据
不同点：强缓存不发请求到服务器，协商缓存会发请求到服务器</p> <h4 id="基本原理"><a href="#基本原理" class="header-anchor">#</a> 基本原理</h4> <ul><li>浏览器在加载资源时
<ul><li>根据请求头的expires（绝对时间、由服务器返回，下次请求如果在这个时间之前则命中缓存）</li> <li>根据请求头的cache-control（相对缓存、利用max-ages如果在生命周期内命中缓存，优先级高于expires）判断是否命中强缓存，</li> <li>是则直接从缓存读取资源，不会发请求到服务器。</li> <li>返回200，size为内存或者磁盘</li></ul></li> <li>如果没有命中强缓存，浏览器一定会发送一个请求到服务器，
<ul><li>通过last-modified（表示本地文件最后修改日期，询问服务器资源是否有更新有更新就发送新资源）</li> <li>通过etag（询问该资源的Etag是否有更新，有变动就会发送新的资源回来）验证资源是否命中协商缓存，</li> <li>如果命中，服务器会将这个请求返回，但是不会返回这个资源的数据，依然是从缓存中读取资源</li> <li>返回304</li></ul></li> <li>如果前面两者都没有命中，直接从服务器加载资源</li></ul> <p>http 200  (memory cache) (disk cache)
http 304</p> <p>css 刷新页面从内存读取，新打开浏览器tab页从磁盘读取</p> <p>缓存对缓存的副本进行在验证时，会向原始服务器发送一个小的在验证请求。
如果内容没有变化，服务器会以一个小的304 not modified 进行响应。
只要缓存知道副本仍然有效，就会再次将副本标识为暂时新鲜的，并将副本提供给客户端这被称为在验证命中或缓慢命中。
这种方式确实要与原始服务器进行核对，所以会比单纯的缓存命中要慢，但它没有从服务器中获取对象数据，所以要比缓存未命中快一些。</p> <p>如果缓存或服务器收到的请求即带有if-modified-since又带有实体标签条件首部 if-none-match,
当与 If-None-Match优先级更高 一同出现时，它（If-Modified-Since）会被忽略掉
那么只有这两个条件都满足时，才能返回304 not medified响应</p> <p>说一下304的情况
第一次直接从服务器请求资源200，
服务器返回头包括
cache-control（指定指令来实现缓存机制）、
ETag（资源的特定版本的标识符。这可以让缓存更高效，并节省带宽，因为如果内容没有改变，Web 服务器不需要发送完整的响应。而如果内容发生了变化，使用 ETag 有助于防止资源的同时更新相互覆盖。如果给定 URL 中的资源更改，则一定要生成新的 ETag 值。比较这些 ETag 能快速确定此资源是否变化。）、
Last-Modified（中包含源头服务器认定的资源做出修改的日期及时间。它通常被用作一个验证器来判断接收到的或者存储的资源是否彼此一致。）
第二次在缓存没有过期的时候会直接从内存或者磁盘中读取返回200，不请求服务器
第三次如果缓存到期，会发送请求头包含
If-Modified-Since【值是上次响应头的last-modified】
（服务器只在所请求的资源在给定的日期时间之后对内容进行过--修改--的情况下才会将资源返回，状态码为 200 。
如果请求的资源从那时起未经修改，那么返回一个不带有消息主体的 304 响应，而在 Last-Modified 首部中会带有上次修改时间。
不同于 If-Unmodified-Since, If-Modified-Since 只可以用在 GET 或 HEAD 请求中。）
If-None-Match【值时上次响应头的etag值】
（服务器上的 ETag 属性值与这个首部中列出的相匹配的时候，相同说明没有被修改返回304，反之返回200）</p> <h3 id="cdn"><a href="#cdn" class="header-anchor">#</a> CDN</h3> <h3 id="_1-css实现动画-怎么让它执行完这个去执行另外一个keyframe-你怎么知道这个动画什么时候结束"><a href="#_1-css实现动画-怎么让它执行完这个去执行另外一个keyframe-你怎么知道这个动画什么时候结束" class="header-anchor">#</a> 1. css实现动画，怎么让它执行完这个去执行另外一个keyFrame，你怎么知道这个动画什么时候结束</h3> <h4 id="可以通过css的animation属性"><a href="#可以通过css的animation属性" class="header-anchor">#</a> 可以通过css的animation属性</h4> <p>知识点：<a href="//developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations">animation</a> 该<code>animation</code>属性被指定为一个或多个单个动画，以逗号分隔。属性如下：</p> <ul><li><code>animation-name</code> ：指定<code>@keyframes</code>描述动画关键帧的规则名称。</li> <li><code>animation-duration[九 睿 神]</code> 配置动画完成一个周期所需的时间。</li> <li><code>animation-timing-function</code> 配置动画的时间；也就是说，通过建立加速曲线，动画如何在关键帧之间过渡。</li> <li><code>animation-delay[迪 累]</code> 配置元素加载时间与动画序列开始之间的延迟。</li> <li><code>animation-iteration-count[一 特 睿 神]</code> 配置动画应重复的次数；您可以指定infinite无限期重复动画。默认1次</li> <li><code>animation-direction[的 rek 神]</code> 配置动画在序列中每次运行时是否应交替显示方向或重置为起点并重复自身。</li> <li><code>animation-fill-mode</code> 配置动画在执行之前和之后应用的值。</li> <li><code>animation-play[普 累]-state[死 得 t]</code> 使您可以暂停和恢复动画序列。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

    <span class="token selector">.s</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
        <span class="token property">animation-name</span><span class="token punctuation">:</span> name1<span class="token punctuation">,</span> name2<span class="token punctuation">;</span>
        <span class="token property">animation-delay</span><span class="token punctuation">:</span>  0s<span class="token punctuation">,</span> 3s<span class="token punctuation">;</span>
        <span class="token property">animation-timing-function</span><span class="token punctuation">:</span>  ease <span class="token punctuation">,</span> ease<span class="token punctuation">;</span>
        <span class="token property">animation-duration</span><span class="token punctuation">:</span> 2s<span class="token punctuation">,</span> 2s<span class="token punctuation">;</span>
        <span class="token property">animation-fill-mode</span><span class="token punctuation">:</span> both<span class="token punctuation">,</span> both<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token atrule"><span class="token rule">@keyframes</span> name1</span> <span class="token punctuation">{</span>
        <span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">left</span><span class="token punctuation">:</span>0<span class="token punctuation">}</span>
        <span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">left</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token atrule"><span class="token rule">@keyframes</span> name2</span> <span class="token punctuation">{</span>
        <span class="token selector">from</span><span class="token punctuation">{</span><span class="token property">top</span><span class="token punctuation">:</span>0<span class="token punctuation">}</span>
        <span class="token selector">to</span><span class="token punctuation">{</span><span class="token property">top</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="使用事件"><a href="#使用事件" class="header-anchor">#</a> 使用事件</h4> <p>animationEnd animationStart</p> <p>elapsedTime 此属性表示动画运行时长</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> animation <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> iterationCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    animation<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'animationstart'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    animation<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'animationiteration'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        iterationCount<span class="token operator">++</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterationCount<span class="token operator">+</span><span class="token string">'----99999'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    animation<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'animationend'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'222='</span><span class="token punctuation">,</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="实现隔一段时间输出name"><a href="#实现隔一段时间输出name" class="header-anchor">#</a> 实现隔一段时间输出name</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 方案一 使用普通方法</span>
    <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//每隔2s输出一下name</span>
        <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token keyword">as</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">as</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>date <span class="token operator">-</span> timer <span class="token operator">&gt;=</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                timer <span class="token operator">=</span> date<span class="token punctuation">;</span>
                window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">as</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>name<span class="token punctuation">,</span> date<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">as</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">'maxiong'</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 方案二 使用promise</span>
    <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//每隔2s输出一下name</span>

        <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">'maxiong'</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 方案三  async await</span>
    <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//每隔2s输出一下name</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token string">'maxiong'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="为啥下面这个代码会爆栈-用settimeout来递归实现setinterve-就不会爆栈"><a href="#为啥下面这个代码会爆栈-用settimeout来递归实现setinterve-就不会爆栈" class="header-anchor">#</a> 为啥下面这个代码会爆栈？用setTimeout来递归实现setInterve()就不会爆栈</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 不会爆栈</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setinterval'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setinterval'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 会爆栈</span>
    <span class="token keyword">function</span> <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        conosle<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'222'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>？？？？？？</p> <h2 id="requestanimationframe-算他的执行间隔"><a href="#requestanimationframe-算他的执行间隔" class="header-anchor">#</a> requestAnimationFrame，算他的执行间隔</h2> <p>这里用到了 <code>requestAnimationFrame</code> 的回调函数的入参 <code>DOMHighResTimeStamp</code>, 单位毫秒</p> <p>该参数与<code>performance.now()</code>的返回值相同，它表示<code>requestAnimationFrame()</code> 开始去执行回调函数的时刻。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">intervalS</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> timer <span class="token operator">=</span> f<span class="token punctuation">;</span>
    <span class="token keyword">let</span> sd <span class="token operator">=</span> f <span class="token operator">-</span> timer<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>sd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sd<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>intervalS<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>intervalS<span class="token punctuation">)</span>

</code></pre></div><h2 id="input-type-file-这个东西好丑-怎么让它变漂亮"><a href="#input-type-file-这个东西好丑-怎么让它变漂亮" class="header-anchor">#</a> <code>&lt;input type=&quot;file&quot;&gt;</code> 这个东西好丑，怎么让它变漂亮</h2> <p>input file上传按钮的美化思路是，先把之前的按钮透明度opacity设置为0,然后，外层用div包裹，就实现了美化功能。</p> <h2 id="读取全部数据-渲染页面"><a href="#读取全部数据-渲染页面" class="header-anchor">#</a> 读取全部数据，渲染页面</h2> <p>一次性读取上百上千上万条数据，渲染页面（数据量小的情况下需等待全部渲染完成才会展示、数据量大的情况下可能会导致浏览器卡死）</p> <p>目前优化方案是：虚拟滚动，就是渲染可视视口（浏览器中网站可见内容）的那部分</p> <h4 id="vxetable-虚拟列表-list"><a href="#vxetable-虚拟列表-list" class="header-anchor">#</a> vxeTable-虚拟列表（list）</h4> <div class="custom-block tip"><p class="custom-block-title">注：</p> <p>必须固定容器高度和行高</p> <ul><li>DOM结构
<ul><li>固定高度的容器（是一个父容器、scroll属性值为auto）</li> <li>父容器包含两个子容器（一个子容器的高度是数据总高度它是浮动的且宽度为0，一个子容器存放数据渲染dom）</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vxe-list--virtual-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--父容器--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vxe-list--y-space<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--数据总高度且浮动且宽度为0--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vxe-list--body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--数据容器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>原理
<ul><li>通过<code>slice</code>方法拿到一组数据，渲染到页面</li> <li>计算出第一个数据元素的行高</li> <li>计算<code>结束处索引</code>：通过可视区域的高度除以行高且向上取整获取可视区域展示数据条数</li> <li>计算出总数据的高度</li> <li>计算出数据容器的marginTop属性值为：<code>起始处的索引*行高</code></li> <li>监听父容器<code>onscroll</code>事件</li> <li>从新计算<code>提取开始处的索引</code>(父容器的内容垂直滚动的像素数scrollTop/行高 - 1且向下取整)、<code>提取终止处的索引</code>(父容器的内容垂直滚动的像素数scrollTop/行高 - 1且向下取整 + 可视区域展示数据条数)</li> <li>向上滚动或者向下滚动，计算出新的开始结束索引不能与旧的开始结束索引一致,不一致才会继续下面的操作</li> <li>通过<code>slice</code>方法截取数据渲染页面，并从新计算空白容器高度与数据容器的marginTop属性</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>可以使用marginTop或者transform：translate3d</p> <h4 id="vxetable-虚拟表格-table"><a href="#vxetable-虚拟表格-table" class="header-anchor">#</a> vxeTable-虚拟表格（table）</h4> <p><code>未开始</code></p> <h4 id="微博list-不等高"><a href="#微博list-不等高" class="header-anchor">#</a> 微博list（不等高）</h4> <ul><li>拿到数据以后，将这些数据存放在一个<code>temporary</code>临时的容器里面(样式为：<code>opacity: 0;position: absolute;top: 0;left: 0;z-index: -99; width: 100%;overflow: hidden;</code>)</li> <li><code>$nextTick</code>通过<code>offsetHeight</code>获取各元素的像素高度</li> <li>监听<code>window.onscroll</code>事件</li> <li>数据容器的paddingTop()、paddingBottom</li></ul> <h2 id="前端控制并发数"><a href="#前端控制并发数" class="header-anchor">#</a> 前端控制并发数</h2> <h4 id="p-limit"><a href="#p-limit" class="header-anchor">#</a> p-limit</h4> <h4 id="思路-首先按照每次只能并发3个请求的要求-这里就对应a、b、c-当其中有一个请求完之后就会再从urls里面再取出一个进行请求-这样依次类推-直到urls里面的20个请求都执行完才终止请求。"><a href="#思路-首先按照每次只能并发3个请求的要求-这里就对应a、b、c-当其中有一个请求完之后就会再从urls里面再取出一个进行请求-这样依次类推-直到urls里面的20个请求都执行完才终止请求。" class="header-anchor">#</a> 思路：首先按照每次只能并发3个请求的要求，这里就对应A、B、C，当其中有一个请求完之后就会再从urls里面再取出一个进行请求，这样依次类推，直到urls里面的20个请求都执行完才终止请求。</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 并发请求函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">concurrencyRequest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">urls<span class="token punctuation">,</span> maxNum</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>urls<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 下一个请求的下标</span>
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 当前请求完成的数量</span>

        <span class="token comment">// 发送请求</span>
        <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> urls<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> <span class="token comment">// 保存序号，使result和urls相对应</span>
            <span class="token keyword">const</span> url <span class="token operator">=</span> urls<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
            index<span class="token operator">++</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// resp 加入到results</span>
                results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> resp<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// err 加入到results</span>
                results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> err<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                count<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token comment">// 判断是否所有的请求都已完成</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> urls<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'完成了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// maxNum和urls.length取最小进行调用</span>
        <span class="token keyword">const</span> times <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>maxNum<span class="token punctuation">,</span> urls<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    urls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://jsonplaceholder.typicode.com/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">concurrencyRequest</span><span class="token punctuation">(</span>urls<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// [黑土豆](https://juejin.cn/post/7163522138698153997)</span>
</code></pre></div><h2 id="关于keep-alive对多级路由缓存无效的情况"><a href="#关于keep-alive对多级路由缓存无效的情况" class="header-anchor">#</a> 关于keep-alive对多级路由缓存无效的情况</h2> <ul><li>路由层级扁平化
<ul><li>后端返回一套路由权限菜单（可用作菜单），前端写死一套路由用户打包与扁平化</li></ul></li> <li>通过<code>to.matched</code>去掉无用层级：一个数组，包含当前路由的所有嵌套路径片段的路由记录 。路由记录就是 routes 配置数组中的对象副本 (还有在 children 数组)。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 多级菜单会导致嵌套dom多</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>matched<span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>matched <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>matched<span class="token punctuation">.</span>length <span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		to<span class="token punctuation">.</span>matched<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>matched<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//console.log(to.matched)</span>
	<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="动态路由同一个组件keepalive导致缓存异常"><a href="#动态路由同一个组件keepalive导致缓存异常" class="header-anchor">#</a> 动态路由同一个组件keepalive导致缓存异常</h2> <ul><li>查看源码发现keepalive是通过对比tag，并且拿到keepalive实例获取cache、keys，并来删除cache、keys的属性或元素来打到keepalive不缓存的目的
<ul><li>解决方法
<ul><li>重写一个keepalive，通过key（$route.fullpath）来判断是否要缓存</li> <li>在进入页面的时候通过路由钩子函数拿到keepalive实例来操作cache、keys的值</li></ul></li></ul></li></ul> <p>查看了一下keepalive源码，销毁缓存组件的是通过
cache将组件赋值null、删除keys数组里面key元素</p> <div class="language-js extra-class"><pre class="language-js"><code>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token function">remove$2</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// splice() 方法用于添加或删除数组中的元素。</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 第一种方案</span>
<span class="token comment">// 重写一个keepalive，通过key（$route.fullpath）来判断是否要缓存</span>
<span class="token keyword">function</span> <span class="token function">pruneCache</span><span class="token punctuation">(</span><span class="token parameter">keepAliveInstance<span class="token punctuation">,</span> filter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> cache <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> keys <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>keys<span class="token punctuation">,</span> _vnode <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>_vnode<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> entry <span class="token operator">=</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> name_1 <span class="token operator">=</span> entry<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>name_1 <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">filter</span><span class="token punctuation">(</span>name_1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span>cache<span class="token punctuation">,</span> key<span class="token punctuation">,</span> keys<span class="token punctuation">,</span> _vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span><span class="token parameter">cache<span class="token punctuation">,</span> key<span class="token punctuation">,</span> keys<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> entry <span class="token operator">=</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entry <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>current <span class="token operator">||</span> entry<span class="token punctuation">.</span>tag <span class="token operator">!==</span> current<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// @ts-expect-error can be undefined</span>
        entry<span class="token punctuation">.</span>componentInstance<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token function">remove$2</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">pruneCacheByKey</span><span class="token punctuation">(</span><span class="token parameter">keepAliveInstance<span class="token punctuation">,</span> filter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keepAliveInstance<span class="token punctuation">)</span>
 <span class="token keyword">var</span> cache <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> keys <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>keys<span class="token punctuation">,</span> _vnode <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>_vnode<span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cache<span class="token punctuation">)</span>
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> entry <span class="token operator">=</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		 <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">filter</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		    entry<span class="token punctuation">.</span>componentInstance<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		    cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		    <span class="token function">remove$2</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		 <span class="token punctuation">}</span>
		
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> patternTypes <span class="token operator">=</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> RegExp<span class="token punctuation">,</span> Array<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// TODO defineComponent</span>
<span class="token keyword">var</span> KeepAlive <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">abstract</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> patternTypes<span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> patternTypes<span class="token punctuation">,</span>
        <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">includeKey</span><span class="token operator">:</span> patternTypes<span class="token punctuation">,</span>
		<span class="token literal-property property">excludeKey</span><span class="token operator">:</span> patternTypes<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">cacheVNode</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> _a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> cache <span class="token operator">=</span> _a<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> keys <span class="token operator">=</span> _a<span class="token punctuation">.</span>keys<span class="token punctuation">,</span> vnodeToCache <span class="token operator">=</span> _a<span class="token punctuation">.</span>vnodeToCache<span class="token punctuation">,</span> keyToCache <span class="token operator">=</span> _a<span class="token punctuation">.</span>keyToCache<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>vnodeToCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> tag <span class="token operator">=</span> vnodeToCache<span class="token punctuation">.</span>tag<span class="token punctuation">,</span> componentInstance <span class="token operator">=</span> vnodeToCache<span class="token punctuation">.</span>componentInstance<span class="token punctuation">,</span> componentOptions <span class="token operator">=</span> vnodeToCache<span class="token punctuation">.</span>componentOptions<span class="token punctuation">;</span>
                cache<span class="token punctuation">[</span>keyToCache<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token function">_getComponentName</span><span class="token punctuation">(</span>componentOptions<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">tag</span><span class="token operator">:</span> tag<span class="token punctuation">,</span>
                    <span class="token literal-property property">componentInstance</span><span class="token operator">:</span> componentInstance
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>keyToCache<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// prune oldest entry</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">&amp;&amp;</span> keys<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span>cache<span class="token punctuation">,</span> keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> keys<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>vnodeToCache <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">destroyed</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pruneCacheEntry</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheVNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'include'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pruneCache</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">matches</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'exclude'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">pruneCache</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">matches</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'includeKey'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		    <span class="token function">pruneCacheByKey</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">matches</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'excludeKey'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		    <span class="token function">pruneCacheByKey</span><span class="token punctuation">(</span>_this<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">'string'</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">matches</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">updated</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheVNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> slot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
        <span class="token keyword">var</span> vnode <span class="token operator">=</span> <span class="token function">getFirstComponentChild</span><span class="token punctuation">(</span>slot<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> componentOptions <span class="token operator">=</span> vnode <span class="token operator">&amp;&amp;</span> vnode<span class="token punctuation">.</span>componentOptions<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>componentOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// check pattern</span>
            <span class="token keyword">var</span> name_2 <span class="token operator">=</span> <span class="token function">_getComponentName</span><span class="token punctuation">(</span>componentOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//var key = vnode.key == null ? comp : vnode.key;</span>
			<span class="token keyword">var</span> key <span class="token operator">=</span> vnode<span class="token punctuation">.</span>key <span class="token operator">==</span> <span class="token keyword">null</span>
			    <span class="token operator">?</span> <span class="token comment">// same constructor may get registered as different local components</span>
			        <span class="token comment">// so cid alone is not enough (#3269)</span>
			        componentOptions<span class="token punctuation">.</span>Ctor<span class="token punctuation">.</span>cid <span class="token operator">+</span>
			            <span class="token punctuation">(</span>componentOptions<span class="token punctuation">.</span>tag <span class="token operator">?</span> <span class="token string">&quot;::&quot;</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>componentOptions<span class="token punctuation">.</span>tag<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span>
			    <span class="token operator">:</span> vnode<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token string">'key'</span><span class="token punctuation">)</span>
            <span class="token keyword">var</span> _a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> include <span class="token operator">=</span> _a<span class="token punctuation">.</span>include<span class="token punctuation">,</span> exclude <span class="token operator">=</span> _a<span class="token punctuation">.</span>exclude<span class="token punctuation">,</span> includeKey <span class="token operator">=</span> _a<span class="token punctuation">.</span>includeKey<span class="token punctuation">,</span> excludeKey <span class="token operator">=</span> _a<span class="token punctuation">.</span>excludeKey<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
            <span class="token comment">// not included</span>
            <span class="token punctuation">(</span>include <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>name_2 <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">matches</span><span class="token punctuation">(</span>include<span class="token punctuation">,</span> name_2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                <span class="token comment">// excluded</span>
                <span class="token punctuation">(</span>exclude <span class="token operator">&amp;&amp;</span> name_2 <span class="token operator">&amp;&amp;</span> <span class="token function">matches</span><span class="token punctuation">(</span>exclude<span class="token punctuation">,</span> name_2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
				
				 <span class="token punctuation">(</span>includeKey <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">!==</span> <span class="token string">'string'</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">matches</span><span class="token punctuation">(</span>includeKey<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
				        <span class="token punctuation">(</span>excludeKey <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">matches</span><span class="token punctuation">(</span>excludeKey<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span>
                <span class="token keyword">return</span> vnode<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">var</span> _b <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> cache <span class="token operator">=</span> _b<span class="token punctuation">.</span>cache<span class="token punctuation">,</span> keys <span class="token operator">=</span> _b<span class="token punctuation">.</span>keys<span class="token punctuation">;</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                vnode<span class="token punctuation">.</span>componentInstance <span class="token operator">=</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>componentInstance<span class="token punctuation">;</span>
                <span class="token comment">// make current key freshest</span>
                <span class="token function">remove$2</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// delay setting the cache until update</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>vnodeToCache <span class="token operator">=</span> vnode<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>keyToCache <span class="token operator">=</span> key<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// @ts-expect-error can vnode.data can be undefined</span>
            vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> vnode <span class="token operator">||</span> <span class="token punctuation">(</span>slot <span class="token operator">&amp;&amp;</span> slot<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 第二种方案</span>
<span class="token comment">// 在进入页面的时候通过路由钩子函数拿到keepalive实例来操作cache、keys的值</span>
<span class="token comment">// 通过watch监听删除的路由是哪个比较好，因为他可能删除的不是当前打开的文件可能是其他的文件</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 他是关闭还是切入后台</span>
			<span class="token keyword">const</span> keepAliveInstance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findKeepAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keepAliveInstance<span class="token punctuation">)</span>
			<span class="token keyword">let</span> <span class="token punctuation">{</span>cache<span class="token punctuation">}</span> <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">;</span>
			<span class="token keyword">delete</span> cache<span class="token punctuation">[</span>from<span class="token punctuation">.</span>fullPath<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token literal-property property">ge_delPath</span><span class="token operator">:</span><span class="token punctuation">{</span>
				<span class="token comment">//immediate:true,</span>
				<span class="token keyword">async</span> <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">nval<span class="token punctuation">,</span>oval</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>nval<span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>watchFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token keyword">const</span> keepAliveInstance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findKeepAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">let</span> cache <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>cache<span class="token punctuation">;</span>
						<span class="token keyword">let</span> keys <span class="token operator">=</span> keepAliveInstance<span class="token punctuation">.</span>keys<span class="token punctuation">;</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>nval<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
							console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keepAliveInstance<span class="token punctuation">,</span><span class="token function">cloneDeep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'离开'</span><span class="token punctuation">)</span>
							
							<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove$2</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span>nval<span class="token punctuation">)</span>
							<span class="token keyword">delete</span> cache<span class="token punctuation">[</span>nval<span class="token punctuation">]</span><span class="token punctuation">;</span>
							console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keepAliveInstance<span class="token punctuation">,</span>keys<span class="token punctuation">,</span><span class="token string">'keepAliveInstance'</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
						
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token function">findKeepAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			      <span class="token keyword">const</span> vnodeParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$vnode<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
				  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vnodeParent<span class="token punctuation">)</span>
			      <span class="token keyword">if</span> <span class="token punctuation">(</span>vnodeParent<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;keep-alive&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			        <span class="token keyword">return</span> vnodeParent<span class="token punctuation">.</span>componentInstance<span class="token punctuation">;</span>
			      <span class="token punctuation">}</span>
			      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			    <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://juejin.cn/post/7140068886598123557?searchId=202307150821329826A575F608D38C662C" target="_blank" rel="noopener noreferrer">参考：<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="渲染页面-浏览器的工作原理"><a href="#渲染页面-浏览器的工作原理" class="header-anchor">#</a> 渲染页面：浏览器的工作原理</h2> <h5 id="tcp-握手"><a href="#tcp-握手" class="header-anchor">#</a> TCP 握手</h5> <p>一旦获取到服务器 IP 地址，浏览器就会通过 TCP“三次握手”与服务器建立连接。
这个机制的是用来让两端尝试进行通信——在浏览器和服务器通过上层协议 HTTPS 发送数据之前，可以协商网络 TCP 套接字连接的一些参数。</p> <p>TCP 的“三次握手”技术经常被称为是 SYN、SYN-ACK、ACK——因为通过 TCP 首先发送了三个消息进行协商，
然后在两台电脑之间开始一个 TCP 会话。是的，这意味着终端与每台服务器之间还要来回发送三条消息，而请求尚未发出。</p> <h5 id="tls-协商"><a href="#tls-协商" class="header-anchor">#</a> TLS 协商</h5> <p>为了在 HTTPS 上建立安全连接，另一种握手是必须的。
更确切的说是 TLS 协商，它决定了什么密码将会被用来加密通信，验证服务器，在进行真实的数据传输之前建立安全连接。
在发送真正的请求内容之前还需要三次往返服务器。</p> <p>经过 8(tcp二次往返服务[共三次]、tls三次往返服务器[共五次]) 次往返，浏览器终于可以发出请求。</p> <h4 id="响应"><a href="#响应" class="header-anchor">#</a> 响应</h4> <p>一旦我们建立了到 web 服务器的连接，浏览器就代表用户发送一个初始的 HTTP GET 请求，对于网站来说，这个请求通常是一个 HTML 文件。
一旦服务器收到请求，它将使用相关的响应头和 HTML 的内容进行回复。</p> <p>这里涉及到一个TCP慢启动、14kb问题、拥塞控制</p> <h4 id="解析"><a href="#解析" class="header-anchor">#</a> 解析</h4> <p>“解析”是浏览器将通过网络接收的数据转换为 DOM 和 CSSOM 的步骤，通过渲染器把 DOM 和 CSSOM 在屏幕上绘制成页面。</p> <ul><li>构建 DOM 树
<ul><li>第一步是处理 HTML 标记并构造 DOM 树（HTML 标记包括开始和结束标记，以及属性名和值。如果文档格式良好，则解析它会简单而快速。解析器将标记化的输入解析到文档中，构建文档树。）</li> <li>DOM 树描述了文档的内容。DOM 节点的数量越多，构建 DOM 树所需的时间就越长。</li> <li>当解析器发现非阻塞资源，例如一张图片，浏览器会请求这些资源并且继续解析。当遇到一个 CSS 文件时，解析也可以继续进行，但是对于 <script></script></li></ul></li></ul></div></div></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/" class="prev router-link-active">
        /blog/
      </a></span> <span class="next"><a href="/blog/" class="router-link-active">
        /blog/
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.38fa98b7.js" defer></script><script src="/assets/js/2.2eaeb6cd.js" defer></script><script src="/assets/js/3.f94d89fc.js" defer></script><script src="/assets/js/14.63493608.js" defer></script>
  </body>
</html>
